"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();_cf.def("React.Common.AccountGatewayButton",["React","_cf"],function(e,t){return e.createClass({displayName:"Account gateway button",getDefaultProps:function(){return{text:"Log in",view:"login",returnUrl:"/"}},handleClick:function(e){t.modal.iframe.open(t.settings.secureUrlBase+"/modal/accountGateway?defaultView="+this.props.view+"&returnUrl="+this.props.returnUrl)},render:function(){var a=t.React.UiComponents;return e.createElement(a.Button,{isMultiState:!1,onClick:this.handleClick,colour:"sunspear"},this.props.text)}})}),_cf.def("React.Common.Validators",[],function(){return{tests:{hasNumbers:function(e){return/\d/.test(e)},hasMixedCase:function(e){return/[a-z]/.test(e)&&/[A-Z]/.test(e)},isEmail:function(e){return/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/.test(e)},isLong:function(e,t){return e&&e.length>=t},isShort:function(e,t){return!e||e&&e.length<=t}},isNotEmpty:function(e){var t=this.tests.isLong(e,1),a="";if(t)return{isValid:!0,message:""};var n=this.props.label.toLowerCase();switch(this.props.fieldType){case"email":a="Oh, we're missing your "+n+".";break;case"name":a="Let's get to know each other. Tell us your "+n+".";break;case"password":a="Hey, not so fast... Weâ€™re going to need that "+n+" first.";break;default:"Your "+this.props.label.toLowerCase()+" is required."}return{isValid:!1,message:a}},isEmailAddress:function(e){var t=this.tests.isEmail(e);return t?{isValid:!0,message:""}:{isValid:!1,message:"Oh, this email address doesn't seem right. Give it another try."}},isPassword:function(e){var t="",a={isLengthValid:this.tests.isLong(e,8),isNumbersValid:this.tests.hasNumbers(e),isMixCaseValid:this.tests.hasMixedCase(e)},n=a.isLengthValid&&a.isNumbersValid&&a.isMixCaseValid;return n||(t="Oh no, this password doesn't seem to meet our requirements. Give it another try."),{isValid:n,message:t,state:a}},isLessThanMaxLength:function(e){var t=this.tests.isShort(e,256),a=this.props.label.toLowerCase(),n=t?"":"Well, that's a big one... Your "+a+" must be less than 256 characters.";return{isValid:t,message:n}},genericErrorMessage:"Oh, something went wrong. Give it another try."}}),_cf.def("React.UiComponents.ActionsBar",["React","cf"],function(e,t){t.React.UiComponents;return e.createClass({displayName:"ActionBar",render:function(){if(!this.props.actionBarItems||!this.props.actionBarItems.length)return null;var a=t.utils.classNames("actions-bar",this.props.className),n=0,s=this.props.actionBarItems.map(function(t){var a,s;return t.iconClass&&(a=e.createElement("i",{className:t.iconClass}),s="has-icon"),e.createElement("li",{key:n++,className:s},a,e.createElement("a",{href:"#",onClick:t.handler},t.text))},this);return e.createElement("div",{className:a},e.createElement("ul",null,s))}})}),_cf.def("React.UiComponents.Button",["React","cf"],function(e,t){var a=t.React.UiComponents;return e.createClass({displayName:"Button",getInitialState:function(){return{isActive:!1,showValidationState:!1,validationMessages:[],displayedValidationMessage:""}},getDefaultProps:function(){return{label:null,activeLabel:"",colour:"sunspear",type:"submit",isMultiState:!0,isDisabled:!1}},handleClick:function(e){e.preventDefault(),this.setState({isActive:!0}),this.props.onClick(function(){this.setState({isActive:!1})}.bind(this))},setMessage:function(e){this.setState({displayedValidationMessage:e,showValidationState:!0})},reset:function(){this.setState({isActive:!1})},showValidationState:function(e){this.setState({showValidationState:e})},componentDidMount:function(){},render:function(){var t=null==this.props.label?this.props.children:this.props.label,n="cfux-button"+(this.state.isActive&&this.props.isMultiState?" active":"");n+=" cfux-colour-"+this.props.colour;var s=this.props.type,i="cfux-field-button"+(this.state.showValidationState?" field-error":"");return e.createElement("div",{className:i},e.createElement("button",{type:s,className:n,onClick:this.handleClick,disabled:this.props.isDisabled},e.createElement("label",{className:"default"},t),e.createElement("label",{className:"active"},this.props.activeLabel)),e.createElement(a.FieldMessage,{text:this.state.displayedValidationMessage}))}})}),_cf.def("React.UiComponents.CheckBox",["React","cf"],function(e,t){return e.createClass({getDefaultProps:function(){return{id:"cbOptIn",additionalText:null,isDisabled:!1,onChange:null}},propTypes:{onChange:e.PropTypes.func.isRequired,value:e.PropTypes.bool.isRequired},handleChange:function(e){this.props.onChange&&this.props.onChange(e)},isValid:function(){return!0},shouldComponentUpdate:function(e,t){return this.props.value!==e.value||this.props.additionalText!==e.additionalText},showValidationState:function(){},value:function(){return this.props.value},render:function(){var a,n=this.props.value,s=n?"checked":"",i=t.utils.classNames("cfux-field",this.props.className);this.props.additionalText&&(a=e.createElement("span",{className:"additional-text"},this.props.additionalText));var r="true"===this.props.multiLine||this.props.multiLine===!0?"multi-line":"single-line";return e.createElement("div",{className:i},e.createElement("input",{className:s,checked:n,disabled:this.props.isDisabled,type:"checkbox",id:this.props.id,onChange:this.handleChange}),e.createElement("label",{htmlFor:this.props.id,className:r},e.createElement("span",{className:"message"},this.props.children),a))}})}),_cf.def("React.UiComponents.CheckBoxList",["React","cf"],function(e,t){var a=t.React.UiComponents,n=e.createClass({displayName:"checkBoxList",getInitialState:function(){return{currentPage:1}},getDefaultProps:function(){return{primaryHeading:"",secondaryHeading:"",hasParentList:!1,isPaginationEnabled:!1,columnCount:1,favouriteItems:[],leastFavouriteItems:[]}},columnify:function(t,a,n){var s,i=[];if(!t||0==t.length||a<=1)return t;s=n?Math.ceil(n/a):Math.ceil(t.length/a);for(var r=0;r<=a-1;r++){var o=t.splice(0,s);i.push(e.createElement("div",{className:"column",key:r},o))}return e.createElement("div",{className:"clearfix columns-"+a},i)},_getCurrentPageSize:function(){var e=this.props.pagingConfig,t=e.firstPageSize||e.pagingConfig.pageSize;return 1==this.state.currentPage?t:e.pageSize},getCheckBoxItemsElement:function(e,t,a){if(e&&e.length){var n=this.getCheckboxItems(e,t);return t&&a&&a>1?this.columnify(n,a,this._getCurrentPageSize()):n}},getCheckboxItems:function(t,n){if(t&&t.length){if(this.props.isPaginationEnabled&&n&&n.pageSize){var s=this._getMaxItemsTillPage(this.state.currentPage-1),i=s+this._getCurrentPageSize();t=t.slice(s,i)}return _.map(t,function(t){if(t.checkBoxData)return e.createElement(a.CheckBoxList.Item,{id:t.associatedData.key,key:t.associatedData.key,associatedData:t.associatedData.Price,associatedDataType:t.associatedDataType,shouldDisplayOnlyLink:t.associatedData.shouldDisplayOnlyLink,iconClass:t.associatedData.iconClass,onOnlyClick:this.props.onOnlyClick},e.createElement(a.CheckBox,{id:t.checkBoxData.id,value:t.checkBoxData.value,additionalText:t.checkBoxData.additionalText,isDisabled:t.checkBoxData.isDisabled,multiLine:t.checkBoxData.multiLine,isFavourite:t.checkBoxData.isFavourite,onChange:t.checkBoxData.onChange},t.checkBoxData.label))},this)}},_showLess:function(){var e=this.state.currentPage>1?this.state.currentPage:1;this.setState({currentPage:e-1})},_showMore:function(){this.setState({currentPage:this.state.currentPage+1})},_shouldDisplayShowLessItems:function(){return this.props.isPaginationEnabled&&this.state.currentPage>1},_getMaxItemsTillPage:function(e){if(0===e)return 0;var t=this.props.pagingConfig.firstPageSize||this.props.pagingConfig.pageSize;return 1*t+(e-1)*this.props.pagingConfig.pageSize},_shouldDisplayShowMoreItems:function(){var e=this._getMaxItemsTillPage(this.state.currentPage);return this.props.isPaginationEnabled&&this.props.data.length>e},render:function(){var a,n,s=__cf.utils.classNames("cfux-checkboxlist",{"has-parent":this.props.hasParentList}),i=this.getCheckBoxItemsElement(this.props.data,this.props.pagingConfig,this.props.columnCount);this.props.isPaginationEnabled&&(a=this._shouldDisplayShowLessItems()?e.createElement("a",{href:"#",className:"previous-page",onClick:this._showLess},this.props.pagingConfig.previousPageText):null,n=this._shouldDisplayShowMoreItems()?e.createElement("a",{href:"#",className:"next-page",onClick:this._showMore},this.props.pagingConfig.nextPageText):null);var r=[];e.Children.forEach(this.props.children,function(e){"header"===e.props.placement&&r.push(e)});var o=t.React.UiComponents;return e.createElement("div",{className:s},e.createElement(o.CheckBoxList.Header,{primaryHeading:this.props.primaryHeading,secondaryHeading:this.props.secondaryHeading},r),a,i,n)}});return n.Header=e.createClass({displayName:"Header",render:function(){var t=this.props.secondaryHeading?e.createElement("span",{className:"secondary"},this.props.secondaryHeading):null;return e.createElement("div",{className:"heading"},this.props.children,e.createElement("div",{className:"title clearfix"},e.createElement("div",{className:"primary"},this.props.primaryHeading),t))}}),n.AdditionalItem=e.createClass({displayName:"AdditionalItem",render:function(){return!(!this.props.placement||!this.props.position)&&this.props.children},propTypes:function(){return{placement:e.PropTypes.string.isRequired,position:e.PropTypes.string.isRequired}}}),n.Item=e.createClass({displayName:"Item",_onOnlyClick:function(){this.props.onOnlyClick&&this.props.onOnlyClick(this.props.id)},_getAssociateItem:function(){var t;switch(this.props.associatedDataType){case"price":if(this.props.associatedData){var n=e.createFactory(a.Price);t=n({className:"associated",value:this.props.associatedData.value,normalisedValue:this.props.associatedData.normalisedValue,currencyCode:this.props.associatedData.currencyCode})}else t=e.DOM.span({className:"associated"},"-");break;default:t=e.DOM.span({className:"associated"},this.props.associatedData)}return t},getDefaultProps:function(){return{associatedData:"",associatedDataType:""}},render:function(){var t,a,n=this._getAssociateItem();if(this.props.iconClass){var s="icon "+this.props.iconClass;a=e.createElement("i",{className:s})}return this.props.shouldDisplayOnlyLink&&(t=e.createElement("a",{href:"#",className:"selectOnly",onClick:this._onOnlyClick},"only")),e.DOM.div({className:"checkbox-row clearfix"},this.props.children,a,t,n)}}),n}),_cf.def("React.UiComponents.Column",["React","cf"],function(e,t){return e.createClass({getDefaultProps:function(){return{columnRange:1,totalColumns:1}},render:function(){var t="cfux-column col-"+this.props.columnRange+"-"+this.props.totalColumns;return e.DOM.div({className:t},this.props.children)}})}),_cf.def("React.UiComponents.DateTime",["React","cf"],function(e,t){return e.createClass({getInitialState:function(){return{}},getDefaultProps:function(){return{}},render:function(){var t=__cf.Models.SimpleDate.create(this.props.children),a=__cf.settings.use24HourClock?"HH:mm":"h:mm",n=t.format(a),s="";return __cf.settings.use24HourClock||(s=e.createElement("span",{className:"am-pm"},t.format("a"))),e.createElement("span",{className:"time","data-time":t.toString()},n,s)}})}),_cf.def("React.UiComponents.Duration",["React","cf"],function(e,t){return e.createClass({displayName:"Duration",getInitialState:function(){return{}},getDefaultProps:function(){return{}},render:function(){var t=moment.duration(this.props.children,"minutes"),a=Math.floor(t.asHours())+"h "+t.minutes()+"m";return e.createElement("span",{className:this.props.className,"data-duration":this.props.children},a)}})}),_cf.def("React.UiComponents.FieldMessage",["React","cf"],function(e,t){return e.createClass({getDefaultProps:function(){return{text:null}},componentDidUpdate:function(e,t){if(e.text!==this.props.text){var a=ReactDOM.findDOMNode(this),n=a.parentNode;setTimeout(function(){a.offsetHeight<=n.offsetHeight?a.style.top="0":a.style.top=-((a.offsetHeight-n.offsetHeight)/2)+"px"},0)}},render:function(){var t=e.DOM.div({className:"inner"},this.props.text);return e.DOM.div({className:"cfux-field-message"},t)}})}),_cf.def("React.UiComponents.Form",["React","cf"],function(e,t){return e.createClass({getDefaultProps:function(){return{additionalClasses:null,title:""}},render:function(){var t="cfux-form";return this.props.additionalClasses&&(t+=" "+this.props.additionalClasses),e.createElement("form",{className:t},e.createElement("div",{className:"cfux-form-title"},this.props.title),e.createElement("div",{className:"cfux-form-body"},this.props.children))}})}),_cf.def("React.UiComponents.Grid",["React","cf"],function(e,t){return e.createClass({getInitialState:function(){return{}},getDefaultProps:function(){return{tiles:[]}},componentWillMount:function(){},componentDidMount:function(){},render:function(){return e.createElement("div",{className:"cfux-grid"},this.props.children)}})}),_cf.def("React.UiComponents.ListItem",["React","cf"],function(e,t){return e.createClass({handleClick:function(e){e.preventDefault(),this.props.onRemove&&this.props.onRemove(this.props.value)},render:function(){var t,a=__cf.utils.classNames("list-item",{"has-image":this.props.imageUrl,"has-icon":this.props.iconClass});if(this.props.imageUrl){var n={backgroundImage:"url("+this.props.imageUrl+")"};t=e.createElement("span",{className:"image",style:n})}else if(this.props.iconClass){var s=__cf.utils.classNames("icon",this.props.iconClass);t=e.createElement("span",{className:s})}return e.createElement("li",{className:a},t,e.createElement("span",{className:"name"},this.props.text),e.createElement("a",{href:"#",onClick:this.handleClick},"REMOVE"))}})}),_cf.def("React.UiComponents.LookupTextBox",["React","cf"],function(e,t){return e.createClass({statics:{airlinesLookup:function(e,t){$.ajax("/api/airlines/lookup",{type:"GET",data:{name:e},dataType:"json",contentType:"text/json"}).done(function(e){var a=[];if(null!=e)for(var n=0;n<e.length;n++)e[n].image=__cf.utils.getAirlineImageUrl(e[n].code),a.push({image:e[n].image,text:e[n].displayName,value:e[n].code,data:e[n]});t({isOk:!0,values:a})}).fail(function(e){t({isOk:!1,values:[]})})},airportsLookup:function(e,t){$.ajax("/api/regions/suggest",{type:"GET",data:{text:e,version:1,type:"o"},dataType:"json",contentType:"text/json"}).done(function(e){var a=[];if(null!=e)for(var n=0;n<e.length;n++)a.push({icon:"icon-airplane-filled",text:e[n].longName,value:e[n].regionCode,data:e[n]});t({isOk:!0,values:a})}).fail(function(e){t({isOk:!1,values:[]})})},destinationsLookup:function(e,t){$.ajax("/api/regions/suggestDestinations",{type:"GET",data:{text:e,version:1,type:"d"},dataType:"json",contentType:"text/json"}).done(function(e){var a=[];if(null!=e)for(var n=0;n<e.length;n++)a.push({icon:"Airport"===e[n].primaryType?"icon-airplane-filled":null,text:e[n].longName,value:e[n].regionCode,data:e[n]});t({isOk:!0,values:a})}).fail(function(e){t({isOk:!1,values:[]})})}},iconClasses:{name:"icon-person-account",email:"icon-email",password:"icon-lock",airport:"icon-airport",airline:"icon-airplane-filled"},getInitialState:function(){return{value:this.props.value,displayValue:this.props.defaultValue,isValid:!1,inFocus:!1,hasValue:""!==this.props.defaultValue&&null!==this.props.defaultValue,mode:this.props.defaultMode||"editing",showValidationState:!1,validationMessages:[],displayedValidationMessage:"",lookupItems:[],showLookup:!1,selectedIndex:0}},getDefaultProps:function(){return{validators:[],defaultValue:"",onValidated:null,onSelect:null,itemFilter:null,minimumLength:3,clearAfterSelection:!0}},scrollToMiddle:function(){var e=$(window),t=ReactDOM.findDOMNode(this),a=210,n=t.getBoundingClientRect(),s=$("html, body"),i=e.height()-n.bottom,r=n.bottom+a>e.height(),o=e.height()/2-i+s.scrollTop();r&&s.animate({scrollTop:o},500)},handleFocus:function(e){this.scrollToMiddle(),this.setState({inFocus:!0,showLookup:this.state.lookupItems.length>0})},handleBlur:function(e){if(this.cancelBlur)console.log("IE firing blur event on scroll bar click!!");else{var t=""!==e.target.value;this.setState({hasValue:t,inFocus:!1,showLookup:!1})}},handleChange:function(e){this.setState({value:e.target.value,hasValue:""!==e.target.value}),this.updateLookup(e.target.value)},keyDownHandlers:{9:function(){return this.setState({showLookup:!1,inFocus:!1,hasValue:!1,value:"",selectedItem:null,lookupItems:[]}),!1},38:function(){this.state.selectedIndex>0&&this.setState({selectedIndex:this.state.selectedIndex-1})},40:function(){this.state.selectedIndex<this.state.lookupItems.length-1&&this.setState({selectedIndex:this.state.selectedIndex+1})},13:function(){var e=this.state.lookupItems[this.state.selectedIndex];this.handleItemClick(this.state.selectedIndex,e),this.scrollToMiddle()},27:function(){this.setState({showLookup:!1})}},handleKeyDown:function(e){if(this.keyDownHandlers[e.keyCode]){var t=this.keyDownHandlers[e.keyCode].call(this);(void 0==t||t)&&(e.stopPropagation(),e.preventDefault())}},updateLookup:function(e){""===e||e.length<this.props.minimumLength?this.setState({lookupItems:[],selectedIndex:-1}):this.props.lookup(e,function(e){var t=null;if(this.props.itemFilter){t=[];for(var a=0;a<e.values.length;a++){var n=e.values[a];this.props.itemFilter(n)&&t.push(n)}}this.setState({lookupItems:t||e.values,selectedIndex:0,showLookup:!0})}.bind(this))},componentWillMount:function(){},componentDidUpdate:function(e,t){},value:function(){return this.state.value},isValid:function(){return this.validate(this.state.value),this.state.isValid},getInputContainerClasses:function(){var e="input-container";return this.state.inFocus&&(e+=" focus"),this.state.isValid&&(e+=" valid"),e},getCfuxFieldClasses:function(){var e="cfux-field";return this.state.showValidationState===!0&&(e+=" field-error"),this.state.hasValue&&(e+=" has-value"),this.props.actions&&(e+=" has-actions"),e=e+" "+this.state.mode},selectText:function(){var e=ReactDOM.findDOMNode(this).querySelector("input");e.select(),e.setSelectionRange&&e.setSelectionRange(0,9999)},handleItemClick:function(e,t){this.props.clearAfterSelection?this.setState({showLookup:!1,inFocus:!0,hasValue:!1,value:"",selectedItem:null,lookupItems:[]}):this.setState({showLookup:!1,value:t.text,selectedItem:t}),this.props.onSelect&&this.props.onSelect(t.value,t.data)},getItemMarkup:function(e,t){var a=new RegExp(t,"gi"),n=a.exec(e);return null!==n&&(e=e.replace(a,"<b>"+n+"</b>")),{__html:e}},render:function(){var t=this,a="editing"!==this.state.mode?"disabled":"",n=(this.props.fieldType||"text",this.state.isValid?"valid":"invalid",this.getInputContainerClasses()),s=this.getCfuxFieldClasses(),i=this.iconClasses[this.props.fieldType]?this.iconClasses[this.props.fieldType]:"";i=this.props.iconClass?this.props.iconClass:i;var r=__cf.utils.classNames({icon:!0},i),o=null,l=this;return this.state.showLookup&&this.state.lookupItems.length>0&&(o=e.DOM.div({className:"cfux-field-layer",onMouseDown:function(e){e.preventDefault(),t.cancelBlur=!0,setTimeout(function(){t.cancelBlur=!1},1),$(document).one("mousedown",function(e){t.isMounted()&&e.target!==ReactDOM.findDOMNode(t)&&!$(e.target).closest($(ReactDOM.findDOMNode(t))).length&&t.setState({hasValue:""!=t.state.value,inFocus:!1,showLookup:!1})})}},e.DOM.ul({},this.state.lookupItems.map(function(t,a){var n=a==l.state.selectedIndex?"selected":"",s="";t.image?s=e.DOM.span({className:"image",style:{backgroundImage:"url("+t.image+")"}}):t.icon&&(s=e.DOM.span({className:"icon "+t.icon}));var i=e.DOM.span({dangerouslySetInnerHTML:l.getItemMarkup(t.text,l.state.value)});return e.DOM.li({className:n,key:t.value,onClick:function(){l.handleItemClick(a,t)}},s,i)})))),e.createElement("div",{className:s},e.createElement("div",{className:"field-container"},e.createElement("div",{className:n},e.createElement("i",{className:r}),e.createElement("label",{htmlFor:this.props.inputId},this.props.label),e.createElement("input",{type:"text",autoComplete:"off",onKeyDown:this.handleKeyDown,onFocus:this.handleFocus,onBlur:this.handleBlur,id:this.props.inputId,onChange:this.handleChange,name:this.props.inputId,defaultValue:this.props.defaultValue,value:this.state.hasValue?this.state.value:null,disabled:a})),e.createElement("div",{className:"cfux-field-message"},this.state.displayedValidationMessage),o))}})}),_cf.def("React.UiComponents.MessageBox",["React","cf"],function(e,t){return e.createClass({getDefaultProps:function(){return{type:"",actions:[]}},handleAction:function(e){var t=this.refs[e.ref],a=ReactDOM.findDOMNode(t);a.innerHTML=e.activeLabel,e.onComplete=function(){a.innerHTML=e.completeLabel,setTimeout(function(){a.innerHTML=e.label},3e3)},e.onAction.call(this,e)},render:function(){for(var t={className:"cfux-messagebox "+this.props.type},a="",n=[],s=0;s<this.props.actions.length;s++){var i=this.props.actions[s];n.push(e.DOM.li({ref:i.ref,key:i.ref,className:i.type,onClick:this.handleAction.bind(this,i)},i.label))}return a=e.DOM.ul({className:"cfux-messagebox-actions clearfix"},n),e.DOM.div(t,e.DOM.div({className:"cfux-messagebox-inner"},e.DOM.div({className:"cfux-messagebox-content"},this.props.children),a))}})}),_cf.def("React.UiComponents.Modal",["React","cf"],function(e,t){return e.createClass({displayName:"Modal",intervalId:0,size:null,statics:{isOpen:!1,open:function(a,n){t.React.UiComponents.Modal.isOpen||(ReactDOM.render(e.createElement(a,n),document.getElementById("modal-content")),t.React.UiComponents.Modal.isOpen=!0)},close:function(){$("#modal-overlay, #modal").removeClass("visible"),ReactDOM.unmountComponentAtNode(document.getElementById("modal-content")),t.React.UiComponents.Modal.isOpen=!1}},getDefaultProps:function(){return{className:null,id:"",tabs:[],keepScrollPosition:!1,onClose:null,shouldShowCloseIcon:!0,shouldCloseOnOverlayClick:!1,isIframe:!1,shouldNotifyOnResize:!0,notifyRefreshRate:50}},getInitialState:function(){return{}},componentDidMount:function(){var e=this,t=document.getElementById("modal-overlay"),a=document.getElementById("modal");if(this.props.isIframe||(a.className+=" visible",t.className+=" visible"),this.props.keepScrollPosition){var n=window.pageYOffset;n+=document.documentElement.clientHeight/2,n-=a.offsetHeight/2,a.style.top=n+"px"}else window.scrollTo(0,0);this.props.shouldCloseOnOverlayClick&&t.addEventListener("click",this.handleClose),this.props.shouldNotifyOnResize&&(this.intervalId=setInterval(function(){e.notifyUpdate()},this.props.notifyRefreshRate))},componentDidUpdate:function(){},componentWillUnmount:function(){clearInterval(this.intervalId);var e=document.getElementById("modal-overlay");e.removeEventListener("click",this.handleClose);var t=document.getElementById("modal");t.removeAttribute("style")},handleTabClick:function(e){e.onClick(e)},handleClose:function(e){this.props.onClose&&this.props.onClose(e),this.props.isIframe?t.utils.postMessage("modal:closeFrame"):t.React.UiComponents.Modal.close()},notifyUpdate:function(){var e=this.refs.modal.getBoundingClientRect(),a=this.size;this.size={width:e.width,height:e.height},null!=a&&a.width==e.width&&a.height==e.height||t.utils.postMessage("modal:setFrameSize",this.size)},render:function(){for(var t=[],a=null,n=0;n<this.props.tabs.length;n++)a=this.props.tabs[n],t.push(e.DOM.li({key:a.key,className:a.key+(a.isSelected?" selected":""),onClick:this.handleTabClick.bind(this,a)},a.label));this.props.shouldShowCloseIcon&&t.push(e.DOM.li({key:"close",className:"right",onClick:this.handleClose},e.DOM.i({className:"icon-cancel"})));var s=e.DOM.ul({className:"options"},t),i=e.DOM.div({className:"header-bar"},s),r="cfux-modal"+(this.props.className?" "+this.props.className:"");return e.DOM.div({className:r,id:this.props.id,ref:"modal"},i,this.props.children)}})}),_cf.def("React.UiComponents.Overlay",["React","cf"],function(e,t){t.React.UiComponents.Overlay=e.createClass({displayName:"Overlay",getInitialState:function(){return{isVisible:!0}},componentDidMount:function(){},render:function(){var t={position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"red"};return e.createElement("div",{id:"overlay",style:t},e.createElement("div",{className:"overlay-inner"},"Hello"))}})}),_cf.def("React.UiComponents.PasswordBox",["React","cf"],function(e,t){var a=t.React.UiComponents;return e.createClass({mixins:[t.React.Common.Validators],getInitialState:function(){return{inputType:this.props.defaultInputType,value:this.props.defaultValue,isValid:!1,inFocus:!1,hasValue:""!=this.props.defaultValue,isLengthValid:!1,isMixCaseValid:!1,isNumbersValid:!1,showValidationState:!1,validationMessages:[],displayedValidationMessage:""}},getDefaultProps:function(){return{shouldShowGuide:!0,defaultValue:"",defaultInputType:"password",fieldType:"password",inputId:"password",shouldAutoCorrect:"off",shouldAutoCapitalize:"off"}},handleFocus:function(e){this.setState({inFocus:!0})},handleBlur:function(e){var t=""!==e.target.value;this.setState({hasValue:t,inFocus:!1})},handleChange:function(e){e.persist(),this.handleDebouncedChange(e)},value:function(){return this.state.value},updateValidationMessage:function(){var e=this.state.validationMessages;this.setState({displayedValidationMessage:e.length>0?e[0]:""})},validate:function(e){var t=[],a=!0,n={};for(var s in this.props.validators){var i=this.props.validators[s],r=this[i];if(r){var o=r(e);if(o.state)for(var l in o.state)n[l]=o.state[l];if(!o.isValid){t.push(o.message),a=!1;break}}}n.value=e,n.isValid=a,n.validationMessages=t,this.setState(n)},handleViewToggle:function(e){e.preventDefault();var t="password"==this.state.inputType?"text":"password";this.setState({inputType:t})},isValid:function(){return this.validate(this.state.value),this.state.isValid},shouldValidate:function(){return this.props.shouldShowGuide},showValidationState:function(e){this.setState({showValidationState:e})},componentWillMount:function(){this.handleDebouncedChange=_.debounce(function(e){this.setState({value:e.target.value}),this.validate(e.target.value)},50),this.validate(this.state.value)},componentDidMount:function(){if(!this.state.hasValue){var e=this;setTimeout(function(){var t=!!ReactDOM.findDOMNode(e).querySelector("input").value;e.setState({hasValue:t})},100)}},getInputContainerClasses:function(){var e="input-container";return this.state.inFocus&&(e+=" focus"),this.state.isValid&&(e+=" valid"),e},getCfuxFieldClasses:function(){var e="cfux-field has-actions password ";return this.state.showValidationState===!0&&(e+=" field-error"),this.state.hasValue&&(e+=" has-value"),e},render:function(){var t,n="password"==this.state.inputType?"Show":"Hide",s=this.getInputContainerClasses(),i=this.getCfuxFieldClasses();return e.createElement("div",{className:i},e.createElement("div",{className:"field-container"},e.createElement("div",{className:s},e.createElement("i",{className:"icon icon-lock"}),e.createElement("label",{htmlFor:this.props.inputId},this.props.label),e.createElement("input",(t={type:this.state.inputType,onFocus:this.handleFocus,onBlur:this.handleBlur,id:"passwordInput",onChange:this.handleChange,ref:"passwordInput",defaultValue:this.props.defaultValue},_defineProperty(t,"id",this.props.inputId),_defineProperty(t,"name",this.props.inputId),_defineProperty(t,"autoCorrect",this.props.shouldAutoCorrect),_defineProperty(t,"autoCapitalize",this.props.shouldAutoCapitalize),t)),e.createElement("a",{href:"#",className:"action",onClick:this.handleViewToggle},n)),e.createElement(a.FieldMessage,{text:this.state.displayedValidationMessage})),e.createElement("div",{className:this.shouldValidate()?"input-guide visible":"input-guide hidden"},"At least",e.createElement("span",{className:this.state.isLengthValid?"valid":"invalid"}," 8 characters,"),e.createElement("span",{className:this.state.isMixCaseValid?"valid":"invalid"}," mixed-case letters "),"and",e.createElement("span",{className:this.state.isNumbersValid?"valid":"invalid"}," numbers ")))}})}),_cf.def("React.UiComponents.Price",["React","cf"],function(e,t){return e.createClass({displayName:"Price",getDefaultProps:function(){return{value:0,normalisedValue:0,currencyCode:null,className:"",isLink:!1}},componentDidMount:function(){var e=this;__cf.Events.Subscribe("global:setCurrency",function(){e.forceUpdate()})},handleClick:function(e){e.preventDefault(),this.props.onClick()},render:function(){var t=__cf.settings.currency,a=this.props.value,n=!1;null!=this.props.currencyCode&&this.props.currencyCode==t.code&&0!==a||(a=this.props.normalisedValue*t.baseRate,n=!0);var s=this.props.className+" price currency-"+this.props.currencyCode;return a=__cf.utils.addThousandSeparator(Math.round(a),__cf.settings.groupSeparator,__cf.settings.decimalSeparator),this.props.isLink?e.createElement("a",{className:s,href:"#",onClick:this.handleClick,"data-isconverted":n,"data-basevalue":this.props.normalisedValue,"data-originalcurrency":this.props.currencyCode,"data-originalvalue":this.props.value},e.createElement("span",{className:"symbol"},t.symbol),e.createElement("span",{className:"value"},a)):e.createElement("span",{className:s,"data-isconverted":n,"data-basevalue":this.props.normalisedValue,"data-originalcurrency":this.props.currencyCode,"data-originalvalue":this.props.value},e.createElement("span",{className:"symbol"},t.symbol),e.createElement("span",{className:"value"},a))}})}),_cf.def("React.UiComponents.Progress",["React","cf"],function(e,t){return e.createClass({getInitialState:function(){return{isStarted:!1}},getDefaultProps:function(){return{}},componentWillMount:function(){},componentDidMount:function(){var e=this;setTimeout(function(){e.setState({isStarted:!0})},1)},render:function(){var t={};return this.state.isStarted&&(t={transform:"translate3d(0%, 0, 0)"}),e.createElement("div",{className:"cfux-progress"},e.createElement("div",{className:"inner",style:t}))}})}),function(e){var t=e.React.UiComponents;t.RadioGroup=React.createClass({displayName:"RadioGroup",getDefaultProps:function(){return{radios:[],name:"",handleRadioSelect:""}},getInitialState:function(){return{selectedRadio:this.props.selectedRadio}},_handleSelect:function(e){var t=this.props.handleRadioSelect(e);this.setState({selectedRadio:t})},render:function(){var e=this.props.radios.map(function(e){var t=this.state.selectedRadio==e.value,a=t?"cfui-radioButton-wrapper checked":"cfui-radioButton-wrapper";return React.createElement("a",{className:a,key:e.value},React.createElement("span",{className:"outer"},React.createElement("span",{className:"inner"})),React.createElement("label",null,React.createElement("input",{className:"cfui-radioButton",type:"radio",name:e.value,value:e.value,selected:this.props.selectedRadio===e.value,onChange:this._handleSelect}),e.text))},this);return React.createElement("radioGroup",null,e)}})}(_cf),_cf.def("React.UiComponents.SelectBox",["React","cf"],function(e,t){return e.createClass({getInitialState:function(){return{displayedValidationMessage:"",value:this.props.selectedOption,hasFocus:!1}},getDefaultProps:function(){return{inputId:"",label:"",onChange:null,groupPropertyName:"group",valuePropertyName:"value",textPropertyName:"text",keyPropertyName:"value",onFocus:null};
},handleChange:function(e){this.setState({value:e.target.value,hasFocus:!1},function(){e.target.blur(),this.props.onChange&&this.props.onChange(this.state)})},handleFocus:function(e){this.setState({hasFocus:!0}),this.props.onFocus&&this.props.onFocus()},handleBlur:function(e){this.setState({hasFocus:!1})},getOptionTag:function(t){return e.createElement("option",{value:t.Value,key:t.Value},t.DisplayName)},getOptionTags:function(e){return _.map(e,function(e){return this.getOptionTag(e)}.bind(this))},getOptgroupTags:function(t){var a=_.map(t,function(t){var a=t[0].Group,n=t[0].Value,s=this.getOptionTags(t);return e.createElement("optgroup",{key:n,label:a},s)}.bind(this));return a},getOptions:function(){var e=this.props.children;return this.props.isGrouped?this.getOptgroupTags(e):this.getOptionTags(e)},getItem:function(){for(var e=this,t=this.props.isGrouped?_.flatten(this.props.children):this.props.children,a=0;a<t.length;a++){var n=t[a];if(n[e.props.valuePropertyName]==e.state.value)return n}return null},getText:function(){var e=this.getItem();return null==e?null:e[this.props.textPropertyName]},render:function(){var t="cfux-field cfux-selectbox";null===this.state.value&&null===this.props.selectedOption||(t+=" has-value");var a="",n=this.getOptions(),s=this.getText(),i="input-container";return this.state.hasFocus&&(i+=" focus"),e.createElement("div",{className:t},e.createElement("div",{className:"field-container"},e.createElement("a",{className:i},e.createElement("i",{className:a}),e.createElement("label",{htmlFor:this.props.inputId},this.props.label),e.createElement("span",{className:"text"},s),e.createElement("span",{className:"icon-arrow-down"}),e.createElement("select",{id:this.props.optionType,onFocus:this.handleFocus,onBlur:this.handleBlur,onChange:this.handleChange,defaultValue:"",value:this.state.value},e.createElement("option",{disabled:!0,value:""}),n)),e.createElement("div",{className:"cfux-field-message"},this.state.displayedValidationMessage)))}})}),_cf.def("React.UiComponents.Slider",["React","cf"],function(e,t){var a=t.React.UiComponents,n=e.createClass({displayName:"slider",sliderHelper:null,statics:{dataTypes:{number:"number",duration:"duration",time:"time"},rangeLimits:{min:"min",max:"max"},types:{range:"range",upper:"upper",lower:"lower"},intervalPercentagePositions:[{view:"all",value:0},{view:"large",value:20},{view:"medium",value:25},{view:"small",value:100/3},{view:"large",value:40},{view:"medium",value:50},{view:"large",value:60},{view:"small",value:100/3*2},{view:"medium",value:75},{view:"large",value:80},{view:"all",value:100}]},getInitialState:function(){return{selectedRangeButtonIndex:-1}},getDefaultProps:function(){return{id:"slider",valueFormat:"",minValue:10,maxValue:100,markers:[],preferredRangeSelector:null,rangeSelectors:[],dataType:"number",selectedMinValue:null,selectedMaxValue:null,type:"range",onRangeChange:null,onValueChange:null}},componentDidMount:function(){this._addDragFunctionality()},componentDidUpdate:function(e,t){__cf.Events.Fire("slider:"+this.props.id+":reactComponentUpdated")},_addDragFunctionality:function(){var e=this,t=(this.props.type,ReactDOM.findDOMNode(this)),n=t.querySelector(".slider-range"),s=t.querySelector(".slider-bar").offsetLeft,i=function(i,r,o){var c=new Draggabilly(i,{axis:"x",containment:!0});return c.getPercentageValue=function(){var e=r===a.Slider.rangeLimits.min?this.position.x:this.slidableAreaWidth+this.position.x;return e/this.slidableAreaWidth*100},c.getSlidableAreaWidth=function(){return this.element.parentNode.offsetWidth-2*this.element.offsetWidth},c.setValueFromPercentage=function(){var e=1,t=this.percentageValue;r===a.Slider.rangeLimits.max&&(t=100-t,e=-1),this.position.x=this.slidableAreaWidth/100*t*e,this.element.style.left=this.position.x+"px"},c.setLabelValue=function(){var t=e.sliderHelper.getValueFromPercentage(this.getPercentageValue()),a=!0;this.label.innerHTML=e.sliderHelper.formatValue(t),this.headerLabel.innerHTML=e.sliderHelper.formatValue(t,a)},c.setRangeWidth=function(){var e=this.width-s;l&&(this.sliderRange.style.marginLeft=l.position.x+e+"px"),d&&(this.sliderRange.style.marginRight=-1*d.position.x+e+"px")},c.showLabel=function(){this.label.className.indexOf("visible")>=0||(this.label.className+=" visible")},c.label=c.element.querySelector(".handle-label"),c.headerLabel=t.querySelector(".slider-header ."+r),c.percentageValue=r===a.Slider.rangeLimits.min?0:100,c.width=c.element.offsetWidth,c.slidableAreaWidth=c.getSlidableAreaWidth(),c.sliderRange=n,c.on("dragStart",o),c.once("dragStart",c.showLabel),c.on("dragMove",_.throttle(function(e,t,a){this.percentageValue=this.getPercentageValue(),this.slidableAreaWidth=this.getSlidableAreaWidth(),this.setLabelValue(),this.setRangeWidth()},0)),c.on("dragEnd",function(t,a){this.percentageValue=this.getPercentageValue(),this.slidableAreaWidth=this.getSlidableAreaWidth(),e.sliderHelper.handleValueChange&&e.sliderHelper.handleValueChange(r,this.percentageValue),e.state.selectedRangeButtonIndex!==-1&&e.setState({selectedRangeButtonIndex:-1})}),c},r=t.querySelector(".handle-container."+a.Slider.rangeLimits.min);if(r)var o=function(e,t){this.containerSize.width=this.containerSize.width-this.size.width+(d?d.position.x:0)},l=i(r,a.Slider.rangeLimits.min,o);var c=t.querySelector(".handle-container."+a.Slider.rangeLimits.max);if(c)var u=function(e,t){this.containerSize.width=this.containerSize.width-this.size.width-(l?l.position.x:0),this.relativeStartPosition.x=this.containerSize.width-this.size.width+this.position.x},d=i(c,a.Slider.rangeLimits.max,u);var h=function(t){var a=function(t){this.slidableAreaWidth=this.getSlidableAreaWidth(),this.percentageValue=e.sliderHelper.getPercentageFromValue(t),this.setValueFromPercentage(),this.setLabelValue(),this.setRangeWidth(),this.showLabel()};t.min&&l&&a.call(l,t.min),t.max&&d&&a.call(d,t.max)};h({min:this.props.selectedMinValue,max:this.props.selectedMaxValue}),__cf.Events.Subscribe("slider:"+this.props.id+":rangeChange",h),__cf.Events.Subscribe("slider:"+this.props.id+":reactComponentUpdated",function(){l&&l.setLabelValue(),d&&d.setLabelValue()}),window.addEventListener("resize",_.debounce(function(){var e=function(){this.slidableAreaWidth=this.getSlidableAreaWidth(),this.setValueFromPercentage(),this.setRangeWidth()};l&&e.call(l),d&&e.call(d)},500))},_getHelper:function(){var e=this.props.dataType===a.Slider.dataTypes.time?a.Slider.Helpers.Time:this.props.dataType===a.Slider.dataTypes.duration?a.Slider.Helpers.Duration:a.Slider.Helpers.Number;return new e(this.props.minValue,this.props.maxValue,this.props.onRangeChange,this.props.onValueChange,this.props.valueFormat)},_getHandlesAndLabels:function(){var t=this.props.type,n=[],s=[],i=this.sliderHelper,r=function(t,a){var r=e.DOM.div({className:"handle-label"}),o=e.DOM.div({className:"handle"}),l=e.DOM.div({className:"handle-container "+t,key:t},r,o),c=!0,u=e.DOM.span({className:t,key:t},i.formatValue(a,c));n.push(l),s.push(u)};if(t!==a.Slider.types.range&&t!==a.Slider.types.lower||r(a.Slider.rangeLimits.min,this.props.minValue),t!==a.Slider.types.range&&t!==a.Slider.types.upper||r(a.Slider.rangeLimits.max,this.props.maxValue),t===a.Slider.types.range){var o=e.DOM.span({key:"separator"}," - ");s.splice(1,0,o)}return{handles:n,headerLabels:s}},_getIntervalLabels:function(){var t=this.sliderHelper;return _.map(a.Slider.intervalPercentagePositions,function(a){var n=t.getValueFromPercentage(a.value),s={left:a.value+"%"};return e.DOM.span({className:"view-"+a.view,style:s,key:Math.round(a.value)},t.formatValue(n))})},_getMarkersAndLegend:function(){var t,a=[],n=[],s=this.sliderHelper;for(t=0;t<this.props.markers.length;t++){var i=this.props.markers[t];if(i.name&&i.value){var r=s.getPercentageFromValue(i.value),o={left:r+"%"};a.push(e.DOM.div({className:"marker-row",key:t},e.DOM.span({style:o},e.DOM.span({className:"marker-label"},i.name)))),n.push(e.DOM.span({key:t},i.name))}}return{markers:a.length?a:null,markerLegendItems:n.length?n:null}},_getRangeSelectionButtons:function(){var t,a=[],n=this.sliderHelper,s=this.props.rangeSelectors.slice(0);for(this.props.preferredRangeSelector&&(s.splice(0,0,this.props.preferredRangeSelector),s[0].isPreferred=!0),t=0;t<s.length;t++){var i=s[t];if(i.name&&i.minValue&&i.maxValue){var r=n.isRangeValid(i.minValue,i.maxValue),o=r?"active":"inactive";o+=i.isPreferred?" preferred":" standard",o+=this.state.selectedRangeButtonIndex===t?" selected":"";var l=i.isPreferred?e.DOM.i({className:"icon icon-favourite"}):null,c=e.DOM.span(null,i.name),u=i.additionalText?e.DOM.span(null,i.additionalText):null,d=e.DOM.button({className:o,disabled:r?"":"disabled",key:t,onClick:this._handleRangeSelectorClick,"data-index":t,"data-min":i.minValue,"data-max":i.maxValue},l,c,u);a.push(d)}}return a},_handleRangeSelectorClick:function(e){var t=e.currentTarget,a=t.getAttribute("data-min"),n=t.getAttribute("data-max");if(a&&n){var s=parseInt(t.getAttribute("data-index"));s!==this.state.selectedRangeButtonIndex&&(this.setState({selectedRangeButtonIndex:s}),this.sliderHelper.handleRangeChange&&this.sliderHelper.handleRangeChange(this.props.id,a,n))}},render:function(){this.sliderHelper=this._getHelper();var t,a,n=this._getHandlesAndLabels(),s=e.DOM.div({className:"slider-header"},n.headerLabels),i=e.DOM.div({className:"slider-range"}),r=e.DOM.div({className:"slider-bar"},i),o=e.DOM.div({className:"slider-bar-container "+this.props.type},r,n.handles),l=this._getIntervalLabels(),c=e.DOM.div({className:"interval-labels"},l),u=this.props.markers.length;if(u){var d=this._getMarkersAndLegend();t=e.DOM.div({className:"markers"},d.markers),a=e.DOM.div({className:"marker-legend"},d.markerLegendItems)}var h;if(this.props.rangeSelectors.length){var p="range-selector";p+=" standard-"+this.props.rangeSelectors.length,p+=this.props.preferredRangeSelector?" has-preferred":"";var m=this._getRangeSelectionButtons();h=e.DOM.div({className:p},m)}var f="cfux-slider"+(u?" has-markers":"");return e.DOM.div({id:this.props.id,className:f},s,t,o,c,h,a)}});return n.Helpers={},n.Helpers.Number=function(e,t,a,n){this.minValue=e,this.maxValue=t,this.onRangeChange=a,this.onValueChange=n,this.range=this._getRange(),this.roundingValue=1},n.Helpers.Number.prototype._addValueToMinValue=function(e){return this.minValue+e},n.Helpers.Number.prototype._getRange=function(){return this.maxValue-this.minValue},n.Helpers.Number.prototype._getValueFromRangeStart=function(e){return e-this.minValue},n.Helpers.Number.prototype.getPercentageFromValue=function(e){var t=this._getValueFromRangeStart(e);return t<=0?0:t>=this.range?100:t/this.range*100},n.Helpers.Number.prototype.getValueFromPercentage=function(e,t){var a;if(e<=.1)a=0;else if(e>=99.9)a=this.range;else{var n=this.range/100*e;a=t?n:Math.round(n/this.roundingValue)*this.roundingValue}return this._addValueToMinValue(a)},n.Helpers.Number.prototype.formatValue=function(e){return e},n.Helpers.Number.prototype.isRangeValid=function(e,t){return t>=this.minValue&&e<=this.maxValue},n.Helpers.Duration=function(e,t,a,s){n.Helpers.Number.call(this,e,t,a,s),this.roundingValue=5},n.Helpers.Duration.prototype=Object.create(n.Helpers.Number.prototype),n.Helpers.Duration.prototype.formatValue=function(e,t){null===t&&(t=!1);var a=moment.duration(e,"minutes"),n=Math.floor(a.asHours()),s=Math.round(e)-60*n,i=t?1===n?" Hour ":" Hours ":"h ",r=t?" Minutes ":"m";return n+i+s+r},n.Helpers.Duration.prototype.handleValueChange=function(e,t){var a=this.getValueFromPercentage(t),n=Math.round(a);this.onValueChange&&this.onValueChange({minutes:n,formattedValue:this.formatValue(n)})},n.Helpers.Time=function(e,t,a,s,i){this.valueFormat=i,this.minValueMoment=this._convertTimeToMoment(e),this.maxValueMoment=this._convertTimeToMoment(t),this.minValueTime=this.minValueMoment.format("HH:mm"),this.maxValueTime=this.maxValueMoment.format("HH:mm"),n.Helpers.Number.call(this,e,t,a,s),this.roundingValue=5},n.Helpers.Time.prototype=Object.create(n.Helpers.Number.prototype),n.Helpers.Time.prototype._convertTimeToSimpleDate=function(e){return new __cf.Models.SimpleDate(this.minValue.year,this.minValue.month,this.minValue.day,e.hours(),e.minutes()).toObject()},n.Helpers.Time.prototype._convertTimeToMoment=function(e){return moment({year:e.year,month:e.month-1,day:e.day,hour:e.hour,minute:e.minute})},n.Helpers.Time.prototype._addValueToMinValue=function(e){return this._convertTimeToMoment(this.minValue).add(e,"minutes")},n.Helpers.Time.prototype._getRange=function(){return this.maxValueMoment.diff(this.minValueMoment,"minutes")},n.Helpers.Time.prototype._getValueFromRangeStart=function(e){return this._convertTimeToMoment(e).diff(this.minValueMoment,"minutes")},n.Helpers.Time.prototype.formatValue=function(e){return e.format||(e=this._convertTimeToMoment(e)),e.format(this.valueFormat)},n.Helpers.Time.prototype.isRangeValid=function(e,t){return t>=this.minValueTime&&e<=this.maxValueTime},n.Helpers.Time.prototype.handleValueChange=function(e,t){var a=this.getValueFromPercentage(t),n=this._convertTimeToSimpleDate(a);this.onValueChange&&this.onValueChange({date:n,rangeLimit:e})},n.Helpers.Time.prototype.handleRangeChange=function(e,t,a){var n=moment(t,"HH:mm"),s=moment(a,"HH:mm");if(n.isValid()&&s.isValid()){var i=t<=this.minValueTime?this.minValue:this._convertTimeToSimpleDate(n),r=a>=this.maxValueTime?this.maxValue:this._convertTimeToSimpleDate(s),o={min:i,max:r};__cf.Events.Fire("slider:"+e+":rangeChange",o),this.onRangeChange&&this.onRangeChange(o)}},n}),_cf.def("React.UiComponents.Spinner",["React"],function(e){var t=function(t){function a(){return _classCallCheck(this,a),_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return _inherits(a,t),_createClass(a,[{key:"render",value:function(){return e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:this.props.width,height:this.props.height,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",className:"svg-spinner"},e.createElement("path",{fill:"none",d:"M0 0h100v100H0z"}),e.createElement("rect",{x:"46",y:"37",width:"8",height:"26",rx:"5",ry:"5",fill:"#2b303d",transform:"translate(0 -35)"}),e.createElement("rect",{x:"46",y:"37",width:"8",height:"26",rx:"5",ry:"5",fill:"#2b303d",transform:"rotate(30 115.31 67.5)"}),e.createElement("rect",{x:"46",y:"37",width:"8",height:"26",rx:"5",ry:"5",fill:"#2b303d",transform:"rotate(60 80.31 67.5)"}),e.createElement("rect",{x:"46",y:"37",width:"8",height:"26",rx:"5",ry:"5",fill:"#2b303d",transform:"rotate(90 67.5 67.5)"}),e.createElement("rect",{x:"46",y:"37",width:"8",height:"26",rx:"5",ry:"5",fill:"#2b303d",transform:"rotate(120 60.104 67.5)"}),e.createElement("rect",{x:"46",y:"37",width:"8",height:"26",rx:"5",ry:"5",fill:"#2b303d",transform:"rotate(150 54.69 67.5)"}),e.createElement("rect",{x:"46",y:"37",width:"8",height:"26",rx:"5",ry:"5",fill:"#2b303d",transform:"rotate(180 50 67.5)"}),e.createElement("rect",{x:"46",y:"37",width:"8",height:"26",rx:"5",ry:"5",fill:"#2b303d",transform:"rotate(-150 45.31 67.5)"}),e.createElement("rect",{x:"46",y:"37",width:"8",height:"26",rx:"5",ry:"5",fill:"#2b303d",transform:"rotate(-120 39.896 67.5)"}),e.createElement("rect",{x:"46",y:"37",width:"8",height:"26",rx:"5",ry:"5",fill:"#2b303d",transform:"rotate(-90 32.5 67.5)"}),e.createElement("rect",{x:"46",y:"37",width:"8",height:"26",rx:"5",ry:"5",fill:"#2b303d",transform:"rotate(-60 19.69 67.5)"}),e.createElement("rect",{x:"46",y:"37",width:"8",height:"26",rx:"5",ry:"5",fill:"#2b303d",transform:"rotate(-30 -15.31 67.5)"}))}}]),a}(e.Component);return t.defaultProps={width:40,height:40},t.propTypes={width:e.PropTypes.number,height:e.PropTypes.number},t}),_cf.def("React.UiComponents.Tabs",["React","cf"],function(e,t){var a=e.createClass({displayName:"tabs",getInitialState:function(){return{selectedTabIndex:this.props.initialSelectedTabIndex,modifiedTabIndexes:[]}},getDefaultProps:function(){return{className:"",contentIsVisible:!0,initialSelectedRoute:null,initialSelectedTabIndex:0,parentHeight:null,onContentChange:null}},componentWillMount:function(){if(this.props.initialSelectedRoute){var t=null;e.Children.forEach(this.props.children,function(e,a){e.props.route===this.props.initialSelectedRoute&&(t=a)},this),null!==t&&this.setState({selectedTabIndex:t})}},componentDidMount:function(){if(this.props.initialSelectedRoute&&window.history){window.history.replaceState({selectedTabIndex:this.state.selectedTabIndex},this.props.initialSelectedRoute);var e=this;window.onpopstate=function(t){t.state&&"undefined"!=typeof t.state.selectedTabIndex&&e.setState({selectedTabIndex:t.state.selectedTabIndex})}}},componentDidUpdate:function(e,t){if(this.props.parentHeight){var a,n=ReactDOM.findDOMNode(this).children,s=null,i=[];for(a=0;a<n.length;a++){var r=n[a],o=r.tagName.toLowerCase();"nav"===o?s=r:"article"===o&&i.push(r)}var l=this.props.parentHeight;for(a=0;a<i.length;a++)i[a].style.height=l+"px"}},_handleTabStripClick:function(e){"nav"!==e.target.nodeName.toLowerCase()&&("li"===e.target.nodeName.toLowerCase()&&this._handleHeadingTabClick(e),this.props.onTabStripClick&&this.props.onTabStripClick(e))},_handleTabClick:function(e){e.preventDefault();var t=e.currentTarget,a=parseInt(t.getAttribute("data-index"));if(this._handleTrackingEvent(a,t.textContent),a!==this.state.selectedTabIndex){var n=t.getAttribute("href");n&&window.history&&window.history.pushState&&window.history.pushState({selectedTabIndex:a},n,this.props.baseUrl+n),this.setState({selectedTabIndex:a})}},_handleHeadingTabClick:function(e){if(!this.props.contentIsVisible&&e.target.textContent){var t=e.target.textContent.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.slice(1)}).replace(/\s+/g,"");this._handleTrackingEvent(0,t)}},_handleTabContentChange:function(e){var t=this.state.modifiedTabIndexes.slice(0);t.indexOf&&t.indexOf(e)<0&&(t.push(e),this.setState({modifiedTabIndexes:t})),this.props.onContentChange&&this.props.onContentChange()},_handleTrackingEvent:function(e,t){if(this.props.onTrackingEvent&&(!this.props.contentIsVisible||e!==this.state.selectedTabIndex)){var a=null;this.props.contentIsVisible?e!==this.state.selectedTabIndex&&(a="View"+t):a="Open"+t+"Directly",a&&this.props.onTrackingEvent(a,"More")}},_getTabStrip:function(){var t=e.Children.map(this.props.children,function(t,a){if(t.props.children){var n=t.props.icon?"icon "+t.props.icon:"",s=e.DOM.i({className:n},""),i=e.DOM.span({className:"text"},t.props.title),r=e.DOM.span({className:"tab-title"},n?s:null,i),o=e.DOM.a({"data-index":a,href:t.props.route,onClick:this._handleTabClick},r),l=a===this.state.selectedTabIndex?"selected":"";return l+=this.state.modifiedTabIndexes.indexOf&&this.state.modifiedTabIndexes.indexOf(a)>=0?" has-changed":"",e.DOM.li({className:l,key:a},o)}return e.DOM.li({className:"heading "+t.props.cssClass,key:a,onClick:t.props.onClick},t.props.title)},this);return e.DOM.nav({className:"cfux-tab-navigation",onClick:this._handleTabStripClick},e.DOM.ul(null,t))},_getContentPanels:function(){var t=e.Children.map(this.props.children,function(t,a){if(!t.props.children)return null;var n=e.cloneElement(t,{className:t.props.className,isVisible:a===this.state.selectedTabIndex,onChange:this._handleTabContentChange,tabIndex:a,panelHeight:this.props.panelHeight});return n},this);return t},render:function(){var t=this._getTabStrip(),a=this._getContentPanels(),n="cfux-tabs "+this.props.className;return e.DOM.div({className:n},t,a)}});return a.Panel=e.createClass({displayName:"Tab Panel",getDefaultProps:function(){return{isVisible:!1,route:null,tabIndex:-1,onChange:null,cssClass:""}},_handleChange:function(){this.props.onChange&&this.props.onChange(this.props.tabIndex)},render:function(){var t=e.Children.map(this.props.children,function(t){if(t)return e.cloneElement(t,{panelHeight:this.props.panelHeight,onChange:this._handleChange})},this),a="cfux-tab-panel "+(this.props.isVisible?"visible":"");return this.props.className&&(a+=" "+this.props.className),e.DOM.article({className:a},t)}}),a}),_cf.def("React.UiComponents.TextBox",["React","cf","_"],function(e,t,a){var n=t.React.UiComponents;return e.createClass({statics:{getDefaultActions:function(e){var t={display:{getText:function(e){return e?"Edit":"Add"},nextMode:"editing",requiresHandler:!0},editing:{text:"Save",nextMode:"saving",requiresHandler:!0,selectTextOnRendered:!0},saving:{text:"Saving",nextMode:"saved"},saved:{text:"Saved",nextMode:"display",autoModeChange:!0,autoModeChangeDelay:2e3}};for(var n in t)a.extend(t[n],e[n]);return t}},iconClasses:{name:"icon-person-account",email:"icon-email",password:"icon-lock"},mixins:[t.React.Common.Validators],getInitialState:function(){return{value:this.props.defaultValue,isValid:!1,inFocus:!1,hasValue:""!=this.props.defaultValue,mode:this.props.defaultMode||"editing",showValidationState:!1,validationMessages:[],displayedValidationMessage:""}},getDefaultProps:function(){return{validators:[],defaultValue:"",onValidated:null,shouldAutoCapitalize:"off",shouldAutoCorrect:"off"}},handleFocus:function(e){this.setState({inFocus:!0})},handleBlur:function(e){var t=""!==e.target.value;this.setState({hasValue:t,inFocus:!1})},handleChange:function(e){e.persist(),this.handleDebouncedChange(e)},componentWillMount:function(){this.handleDebouncedChange=a.debounce(function(e){this.setState({value:e.target.value}),this.validate(e.target.value)},200),this.validate(this.state.value)},componentDidMount:function(){if(!this.state.hasValue){var e=this;setTimeout(function(){var t=!!ReactDOM.findDOMNode(e).querySelector("input").value;e.setState({hasValue:t})},100)}},componentDidUpdate:function(e,t){if(this.props.actions){var a=this.props.actions[this.state.mode];a&&a.selectTextOnRendered&&!t.inFocus&&!this.state.inFocus&&this.selectText()}},updateValidationMessage:function(e){var t=this.state.validationMessages;this.setState({displayedValidationMessage:e||(t.length>0?t[0]:"")})},validate:function(e){var t=[],a=!0;for(var n in this.props.validators){var s=this.props.validators[n],i=this[s];if(i){var r=i(e);if(!r.isValid){t.push(r.message),a=!1;break}}}var o={value:e,isValid:a,validationMessages:t};this.setState(o),this.props.onValidated&&this.props.onValidated(o)},value:function(){return this.state.value},isValid:function(){return this.validate(this.state.value),this.state.isValid},showValidationState:function(e){this.setState({showValidationState:e})},getInputContainerClasses:function(){var e="input-container";return this.state.inFocus&&(e+=" focus"),this.state.isValid&&(e+=" valid"),e},getCfuxFieldClasses:function(){var e="cfux-field";return this.state.showValidationState===!0&&(e+=" field-error"),this.state.hasValue&&(e+=" has-value"),this.props.actions&&(e+=" has-actions"),e=e+" "+this.state.mode},handleActionClick:function(e){var t=this.props.actions[this.state.mode];t&&(e.preventDefault(),t.handler&&(e.target=this,t.handler(e),e.cancelBubble)||this.setNextModeFromAction(t))},setMode:function(e){this.setState({mode:e})},setNextMode:function(){var e=this.props.actions[this.state.mode];this.setNextModeFromAction(e)},setNextModeFromAction:function(e){if(e.nextMode){this.setMode(e.nextMode);var t=this.props.actions[e.nextMode];if(t.autoModeChange){var a=this;setTimeout(function(){a.setMode(t.nextMode)},t.autoModeChangeDelay||2e3)}}},selectText:function(){var e=ReactDOM.findDOMNode(this).querySelector("input");e.select(),e.setSelectionRange&&e.setSelectionRange(0,9999)},render:function(){var a="editing"!==this.state.mode?"disabled":"",s="editing"!==this.state.mode?"readonly":"",i="";switch(this.props.fieldType){case"email":i="email";break;case"password":i="password";break;default:i="text"}var r=(this.state.isValid?"valid":"invalid",this.getInputContainerClasses()),o=this.getCfuxFieldClasses(),l=this.iconClasses[this.props.fieldType]?this.iconClasses[this.props.fieldType]:"";l=this.props.iconClass?this.props.iconClass:l;var c,u=t.utils.classNames({icon:!0},l);if(this.props.actions&&this.props.actions[this.state.mode]){var d=this.props.actions[this.state.mode],h=d.text||d.getText(this.state.value),p=d.handler||d.requiresHandler;c=p?e.createElement("a",{href:"#",className:"action",onClick:this.handleActionClick},h):e.createElement("span",{className:"action"},h)}return e.createElement("div",{className:o},e.createElement("div",{className:"field-container"},e.createElement("div",{className:r},e.createElement("i",{className:u}),e.createElement("label",{htmlFor:this.props.inputId},this.props.label),e.createElement("input",{type:i,autoComplete:"off",autoCorrect:this.props.shouldAutoCorrect,autoCapitalize:this.props.shouldAutoCapitalize,onFocus:this.handleFocus,onBlur:this.handleBlur,id:this.props.inputId,onChange:this.handleChange,name:this.props.inputId,defaultValue:this.props.defaultValue,disabled:a,readOnly:s}),c),e.createElement(n.FieldMessage,{text:this.state.displayedValidationMessage})))}})}),_cf.def("React.UiComponents.Tile",["React","cf"],function(e,t){return e.createClass({getInitialState:function(){return{}},getDefaultProps:function(){return{label:"",value:""}},componentWillMount:function(){},componentDidMount:function(){},render:function(){var t="";return t=""!=this.props.value?this.props.value:this.props.children,e.createElement("div",{className:"cfux-tile"},e.createElement("div",{className:"inner"}),e.createElement("span",{className:"label"},this.props.label),e.createElement("span",{className:"tile-content"},t))}})}),_cf.def("React.Forms.HPDEmailSignupForm",["React","cf"],function(e,t){var a=e.createClass({displayName:"Privacy",render:function(){return e.createElement("div",{className:"privacy"},"See our ",e.createElement("a",{href:"/privacy"},"privacy policy"),". You can ",e.createElement("a",{href:"/email-newsletter/unsubscribe"},"unsubscribe")," at any time.")}});return e.createClass({displayName:"HPDEmailSignupForm",componentDidMount:function(){t.Events.Fire("newsletterSignup:open")},errorHandlers:{Default:function(){this.refs.SignUpButton.setMessage("Oh, this email address doesn't seem right. Give it another try."),this.refs.SignUpButton.reset()}},getInitialState:function(){return{emailAddress:"",showValidationStatus:!1,hasCompletedEmailSignup:!1}},getDefaultProps:function(){return{}},_handleSignupButtonClick:function(e){this._checkValidation().done(this._submit).fail(function(){this.refs.SignUpButton.reset()}.bind(this)).always(function(){})},_submit:function(e){var a,n,s=new t.url(window.location.href);"undefined"!==s.querystring("source")&&(a=s.querystring("source")),"undefined"!==s.querystring("uid")&&(n=s.querystring("uid")),$.ajax("/newsletter/Subscribe",{type:"POST",data:{email:e.Email,list:this.props.List,source:a||this.props.Source,uid:n||void 0},dataType:"json",contentType:"application/x-www-form-urlencoded"}).done(function(t){if(t)if(t.success)this._completeSignupProcess();else if(!t.success&&t.errors&&t.errors.length>0){var a=t.errors[0],n=this.errorHandlers[a];n?n.bind(this)(e):this.errorHandlers.Default.bind(this)(e)}}.bind(this)).fail(function(e){}.bind(this)).always(function(e){}.bind(this))},_completeSignupProcess:function(){var e=new t.cookie("cf-nl4");e.value(!0),e.savePermanently(),this.setState({hasCompletedEmailSignup:!0}),t.Events.Fire("newsletterSignup:subscribe")},_checkValidation:function(){for(var e=jQuery.Deferred(),t=!0,a=["Email"],n={},s=0;s<a.length;s++){var i=this.refs[a[s]];i.isValid()?(n[a[s]]=i.value(),i.showValidationState(!1)):(t=!1,i.showValidationState(!0),i.updateValidationMessage())}return t?e.resolve(n):e.reject("fail"),e.promise()},_handleEmailValidated:function(e){var t="";e.isValid&&(t=e.value),this.state.email!=t&&this.setState({email:t})},render:function(){var n=["isEmailAddress"],s=t.React.UiComponents,i=this.state.hasCompletedEmailSignup?"cfFormsRegister hidden":"cfFormsRegister",r=this.state.hasCompletedEmailSignup?"email-signup-complete":"email-signup-complete hidden";return e.createElement("div",{className:this.props.className},e.createElement("form",{className:i},e.createElement("div",{className:"copy"},e.createElement("h2",null,"Want travel deals? Join over 12 million subscribers for free now."),e.createElement("span",{className:"subtitle"},"Sign up to our emails and get the hottest travel deals we can find; from flights and vacations to short breaks and cruises.")),e.createElement("div",{className:"form"},e.createElement("div",{className:"input"},e.createElement(s.TextBox,{fieldType:"email",label:"Email address",ref:"Email",inputId:"email",validators:n,onValidated:this._handleEmailValidated})),e.createElement("div",{className:"button"},e.createElement(s.Button,{onClick:this._handleSignupButtonClick,ref:"SignUpButton",isMultiState:!1,colour:"sunspear"},"Send me deals"))),e.createElement(a,null)),e.createElement("section",{className:r},e.createElement("div",{className:"copy"},e.createElement("h2",null,"Thank you!"),e.createElement("span",{className:"subtitle"},"You are now signed up to the Cheapflights Newsletter."),e.createElement("span",{className:"subtitle"},"You will receive a confirmation email ",e.createElement("span",{className:"timeframe"},"within 24 hours"),"."),e.createElement("span",{className:"subtitle-combined"},"You are now signed up to the Cheapflights Newsletter. You will receive a confirmation email ",e.createElement("span",{className:"timeframe"},"within 24 hours"),"."))))}})}),_cf.def("React.Forms.LoginForm",["React","cf"],function(e,t){return e.createClass({displayName:"LoginForm",errorHandlers:{Default:function(){this.refs.LogInButton.setMessage("Oh, this email and password combination doesnâ€™t seem right. Give it another try."),this.refs.LogInButton.reset()},PendingActivation:function(e){this.props.onUnverifiedLogin({mode:"PendingActivation",email:e.email})},Locked:function(){this.refs.LogInButton.setMessage("Weâ€™ve had to lock this account down for now. But don't worry, you can try again a little later."),this.refs.LogInButton.reset()}},componentDidUpdate:function(){},getInitialState:function(){return{rememberMeChecked:!0}},getDefaultProps:function(){return{onUnverifiedLogin:function(){},onResetPassword:function(){},returnUrl:null}},handleButtonClick:function(e){this.checkValidation().done(this.submit).fail(function(){this.refs.LogInButton.reset()}.bind(this)).always(function(){}),t.Events.FireSynchronous("personalisation:login",{action:"email",source:"submit"})},handleResetPasswordClick:function(e){e.preventDefault();var a="";this.refs.email.isValid()&&(a=this.refs.email.value()),this.props.onResetPassword&&this.props.onResetPassword({email:a}),t.Events.Fire("personalisation:forgottenPassword",{action:"view"})},handleEmailValidated:function(e){this.props.onEmailValidated&&this.props.onEmailValidated(e)},submit:function(e){e.__RequestVerificationToken=t.utils.getAntiForgeryToken(),e.returnUrl=this.props.returnUrl,$.ajax({url:t.settings.secureUrlBase+"/account/api/verify",type:"POST",data:e,dataType:"json",contentType:"application/x-www-form-urlencoded"}).done(function(a){if(a&&a.status)if("success"===a.status)t.utils.dispatch(t.settings.secureUrlBase+"/account/api/login",e,"_top");else if("error"===a.status&&a.errors&&a.errors.length>0){var n=a.errors[0],s=this.errorHandlers[n];s?s.bind(this)(e):this.errorHandlers.Default.bind(this)(e)}}.bind(this)).fail(function(e){}.bind(this)).always(function(e){}.bind(this))},checkValidation:function(){for(var e=$.Deferred(),t=!0,a=["email","password","rememberMe"],n={},s=0;s<a.length;s++){var i=this.refs[a[s]];i.isValid()?(n[a[s]]=i.value(),i.showValidationState(!1)):(t=!1,i.showValidationState(!0),i.updateValidationMessage())}return t?e.resolve(n):e.reject("fail"),e.promise()},_handleRememberMeChange:function(e){this.setState({rememberMeChecked:e.target.checked})},render:function(){var a=["isNotEmpty","isEmailAddress"],n=["isNotEmpty"],s=t.React.UiComponents;return e.createElement("form",{className:"cfux"},e.createElement("div",{className:"heading"},"Log in with your email address"),e.createElement(s.TextBox,{fieldType:"email",label:"Email address",
inputId:"email",ref:"email",validators:a,onValidated:this.handleEmailValidated,defaultValue:this.props.email}),e.createElement(s.PasswordBox,{label:"Password",ref:"password",shouldShowGuide:!1,validators:n}),e.createElement(s.CheckBox,{id:"cbRememberMe",multiLine:"false",value:this.state.rememberMeChecked,ref:"rememberMe",onChange:this._handleRememberMeChange},"Remember me"),e.createElement(s.Button,{ref:"LogInButton",onClick:this.handleButtonClick,activeLabel:"Logging in..."},"Log in"),e.createElement("div",{className:"forgotPassword"},e.createElement("a",{href:"#",onClick:this.handleResetPasswordClick},"Forgot your password?")))}})}),_cf.def("React.Forms.PPCEmailSignupForm",["React","cf"],function(e,t){var a=e.createClass({displayName:"Privacy",render:function(){return e.createElement("div",{className:"privacy"},"See our ",e.createElement("a",{href:"/privacy"},"privacy policy"),". You can ",e.createElement("a",{href:"/email-newsletter/unsubscribe"},"unsubscribe")," at any time.")}});return e.createClass({displayName:"PPCEmailSignupForm",componentDidMount:function(){t.Events.Fire("newsletterSignup:open")},errorHandlers:{Default:function(){this.refs.SignUpButton.setMessage("Oh, this email address doesn't seem right. Give it another try."),this.refs.SignUpButton.reset()}},getInitialState:function(){return{emailAddress:"",showValidationStatus:!1,hasCompletedEmailSignup:!1}},getDefaultProps:function(){return{}},_handleSignupButtonClick:function(e){this._checkValidation().done(this._submit).fail(function(){this.refs.SignUpButton.reset()}.bind(this)).always(function(){})},_submit:function(e){e.List=this.props.List,e.Source=this.props.Source,$.ajax("/newsletter/subscribe",{type:"POST",data:e,dataType:"json",contentType:"application/x-www-form-urlencoded"}).done(function(a){if(a)if(a.success)this._completeSignupProcess(),t.Events.Fire("newsletterSignup:subscribe");else if(!a.success&&a.errors&&a.errors.length>0){var n=a.errors[0],s=this.errorHandlers[n];s?s.bind(this)(e):this.errorHandlers.Default.bind(this)(e)}}.bind(this)).fail(function(e){}.bind(this)).always(function(e){}.bind(this))},_completeSignupProcess:function(){var e=new t.cookie("cf-nl4");e.value(!0),e.savePermanently(),this.setState({hasCompletedEmailSignup:!0})},_checkValidation:function(){for(var e=jQuery.Deferred(),t=!0,a=["Email"],n={},s=0;s<a.length;s++){var i=this.refs[a[s]];i.isValid()?(n[a[s]]=i.value(),i.showValidationState(!1)):(t=!1,i.showValidationState(!0),i.updateValidationMessage())}return t?e.resolve(n):e.reject("fail"),e.promise()},_handleEmailValidated:function(e){var t="";e.isValid&&(t=e.value),this.state.email!=t&&this.setState({email:t})},render:function(){var n=["isEmailAddress"],s=t.React.UiComponents,i=this.state.hasCompletedEmailSignup?"cfFormsRegister hidden":"cfFormsRegister",r=this.state.hasCompletedEmailSignup?"email-signup-complete":"email-signup-complete hidden";return e.createElement("div",{className:this.props.className},e.createElement("form",{className:i},e.createElement("div",{className:"copy"},e.createElement("h2",null,"Send deals straight to my inbox"),e.createElement("span",{className:"subtitle"},"Sign up for exclusive deals, special offers and the latest news"),e.createElement(a,null)),e.createElement("div",{className:"form"},e.createElement("div",{className:"input"},e.createElement(s.TextBox,{fieldType:"email",label:"Email address",ref:"Email",inputId:"email",validators:n,onValidated:this._handleEmailValidated})),e.createElement("div",{className:"button"},e.createElement(s.Button,{onClick:this._handleSignupButtonClick,ref:"SignUpButton",activeLabel:"Signing you up...",colour:"sunspear"},"Sign up")),e.createElement(a,null))),e.createElement("section",{className:r},e.createElement("div",{className:"copy"},e.createElement("h2",null,"Thank you!"),e.createElement("span",{className:"subtitle"},"You are now signed up to the Cheapflights Newsletter."),e.createElement("span",{className:"icon-tick"}),e.createElement("span",{className:"subtitle"},"You will receive a confirmation email ",e.createElement("span",{className:"timeframe"},"within 24 hours"),"."),e.createElement("span",{className:"subtitle-combined"},"You are now signed up to the Cheapflights Newsletter. You will receive a confirmation email ",e.createElement("span",{className:"timeframe"},"within 24 hours"),"."))))}})}),_cf.def("React.Forms.RegisterForm",["React","cf"],function(e,t){return e.createClass({displayName:"RegisterForm",errorHandlers:{Default:function(){this.refs.SignUpButton.setMessage("Oh, something went wrong. Give it another try."),this.refs.SignUpButton.reset()},AlreadyRegistered:function(){this.refs.SignUpButton.setMessage("Well, hello again you. This account already exists. Go ahead and log in."),this.refs.SignUpButton.reset()},PendingActivation:function(e){this.props.onRegisterComplete({mode:"PendingActivation",email:e.Email})}},getInitialState:function(){return{firstName:"",emailAddress:"",password:"",showValidationStatus:!1}},getDefaultProps:function(){return{onRegisterComplete:function(){}}},handleSubmit:function(e){this.validate().done(function(t){this.submit(t,e)}.bind(this)).fail(function(){this.refs.SignUpButton.reset()}.bind(this)).always(function(){}.bind(this)),t.Events.FireSynchronous("personalisation:signup",{action:"email",source:"submit"})},submit:function(e,a){e.__RequestVerificationToken=t.utils.getAntiForgeryToken(),$.ajax(t.settings.secureUrlBase+"/account/api/register",{type:"POST",data:e,dataType:"json",contentType:"application/x-www-form-urlencoded"}).done(function(a){if(a)if("success"==a.status)this.props.onRegisterComplete({mode:"FirstTime",email:e.Email}),t.Events.Fire("personalisation:signup:activate",{action:"view",source:"signup",userCode:a.userCode});else if("error"==a.status&&a.errors&&a.errors.length>0){var n=a.errors[0],s=this.errorHandlers[n];s?s.bind(this)(e):this.errorHandlers.Default.bind(this)(e)}}.bind(this)).fail(function(t){this.errorHandlers.Default.bind(this)(e)}.bind(this)).always(function(){}.bind(this))},validate:function(){for(var e=jQuery.Deferred(),t=!0,a=["FirstName","Email","Password"],n={},s=0;s<a.length;s++){var i=this.refs[a[s]];i.isValid()?(n[a[s]]=i.value(),i.showValidationState(!1)):(t=!1,i.showValidationState(!0),i.updateValidationMessage())}return t?e.resolve(n):e.reject("fail"),e.promise()},handleEmailValidated:function(e){this.props.onEmailValidated&&this.props.onEmailValidated(e)},componentDidMount:function(){},render:function(){var a=["isNotEmpty","isLessThanMaxLength"],n=["isNotEmpty","isEmailAddress"],s=["isNotEmpty","isPassword"],i=t.React.UiComponents;return e.createElement("form",{className:"cfFormsRegister"},e.createElement("div",{className:"heading"},"Create an account:"),e.createElement(i.TextBox,{fieldType:"name",label:"First name",ref:"FirstName",inputId:"name",validators:a,shouldAutoCapitalize:"on"}),e.createElement(i.TextBox,{fieldType:"email",label:"Email address",ref:"Email",inputId:"email",validators:n,onValidated:this.handleEmailValidated,defaultValue:this.props.email}),e.createElement(i.PasswordBox,{ref:"Password",label:"Password",shouldShowGuide:!0,validators:s,defaultInputType:"text"}),e.createElement(i.Button,{onClick:this.handleSubmit,ref:"SignUpButton",activeLabel:"Signing you up...",colour:"sunspear"},"Sign up for free"))}})}),_cf.def("React.Forms.ResetPasswordForm",["React","cf"],function(e,t){return e.createClass({displayName:"ResetPasswordForm",errorHandlers:{Default:function(){this.refs.ResetButton.setMessage("Oh, something went wrong. Give it another try.")},InvalidCode:function(e){this.refs.ResetButton.setMessage("Oh no, this reset link has expired.")}},getInitialState:function(){return{}},getDefaultProps:function(){return{antiForgeryToken:"",resetPasswordToken:""}},handleButtonClick:function(){this.validate().done(this.submit).fail(function(){this.refs.ResetButton.reset()}.bind(this)).always(function(){})},submit:function(e,a){e.__RequestVerificationToken=t.utils.getAntiForgeryToken(),e.Token=this.props.resetPasswordToken,$.ajax(t.settings.secureUrlBase+"/account/api/resetPassword",{type:"POST",data:e,dataType:"json",contentType:"application/x-www-form-urlencoded"}).done(function(a){if(a&&a.status)if("success"==a.status)location.href=t.settings.secureUrlBase+"/log-in/?message=ResetPassword";else if(a.errors&&a.errors.length>0){var n=a.errors[0],s=this.errorHandlers[n];s?s.bind(this)(e):this.errorHandlers.Default.bind(this)(e)}}.bind(this)).fail(function(e){}.bind(this)).always(function(e){this.refs.ResetButton.reset()}.bind(this))},validate:function(){for(var e=jQuery.Deferred(),t=!0,a=["Password"],n={},s=0;s<a.length;s++){var i=this.refs[a[s]];i.isValid()?(n[a[s]]=i.value(),i.showValidationState(!1)):(t=!1,i.showValidationState(!0),i.updateValidationMessage())}return t?e.resolve(n):e.reject("fail"),e.promise()},render:function(){var a=["isNotEmpty","isPassword"],n=t.React.UiComponents;return e.createElement("form",{className:"cfux resetPassword"},e.createElement(n.PasswordBox,{label:"Password",ref:"Password",validators:a,defaultInputType:"text"}),e.createElement(n.Button,{ref:"ResetButton",onClick:this.handleButtonClick,activeLabel:"Changing password..."},"Change password"))}})}),_cf.def("React.Forms.SocialEmailForm",["React","cf"],function(e,t){return e.createClass({displayName:"SocialEmailForm",mixins:[t.React.Common.Validators],_handleOnClick:function(){this.refs.ConfirmButton.showValidationState(!1),this._validate()&&this._submit()},_submit:function(){var e=this,a={__RequestVerificationToken:t.utils.getAntiForgeryToken(),email:e.refs.Email.value()};$.ajax(t.settings.secureUrlBase+"/account/api/externalLoginConfirmation",{type:"POST",data:a,dataType:"json",contentType:"application/x-www-form-urlencoded"}).done(function(t){var a=t&&t.error?t.error:e.genericErrorMessage;return t&&"success"===t.status?void(window.location.href="/"):void e.refs.ConfirmButton.setMessage(a)}).fail(function(){e.refs.ConfirmButton.setMessage(e.genericErrorMessage)}).always(function(){e.refs.ConfirmButton.reset()})},_validate:function(){var e=this.refs.Email,t=e.isValid();return e.showValidationState(!t),!!t||(e.updateValidationMessage(),this.refs.ConfirmButton.reset(),!1)},render:function(){var a=t.React.UiComponents,n=["isNotEmpty","isEmailAddress"];return e.createElement("form",{className:"cfux simple-form"},e.createElement(a.TextBox,{fieldType:"email",inputId:"email",label:"Email address",ref:"Email",validators:n}),e.createElement(a.Button,{activeLabel:"Saving...",ref:"ConfirmButton",onClick:this._handleOnClick},"Confirm"))}})}),_cf.def("React.Forms.SocialLoginForm",["React","cf"],function(e,t){return e.createClass({displayName:"SocialLoginForm",getInitialState:function(){return{}},getDefaultProps:function(){return{mode:"login",returnUrl:"/",antiForgeryToken:"none"}},componentDidMount:function(){},handleButtonClick:function(e){e.preventDefault();var a=e.currentTarget,n="provider";t.Events.FireSynchronous("personalisation:"+this.props.mode,{action:a.id.toLowerCase(),source:"submit"});var s=a.form.querySelector('input[name="'+n+'"]');s&&a.form.removeChild(s);var i=document.createElement("input");i.name=n,i.type="hidden",i.value=a.id,a.form.appendChild(i),a.form.action=t.settings.secureUrlBase+"/account/api/externalLogin",this.refs.antiForgeryTokenField.value||(this.refs.antiForgeryTokenField.value=t.utils.getAntiForgeryToken()),a.form.submit()},render:function(){var t="login"==this.props.mode?e.createElement("span",null,"Log in with"):e.createElement("span",null,"Sign up with ",e.createElement("span",{className:"recommended"},"(recommended)"));return e.createElement("form",{action:"",method:"post",className:"socialLogin-form",id:"social-login-form",target:"_top"},e.createElement("input",{name:"__RequestVerificationToken",type:"hidden",value:this.props.antiForgeryToken,ref:"antiForgeryTokenField"}),e.createElement("input",{name:"returnUrl",type:"hidden",value:this.props.returnUrl}),e.createElement("div",{className:"heading"},t),e.createElement("div",{className:"buttons"},e.createElement("button",{type:"submit",onClick:this.handleButtonClick,id:"Google",name:"provider",className:"cfux-button google",value:"Google",title:"Log in using your Google account"},e.createElement("span",{className:"image"}),e.createElement("span",{className:"brand-text"},"Google")),e.createElement("button",{type:"submit",onClick:this.handleButtonClick,id:"Facebook",name:"provider",className:"cfux-button facebook",value:"Facebook",title:"Log in using your Facebook account"},e.createElement("span",{className:"image"}),e.createElement("span",{className:"brand-text"},"Facebook"))),e.createElement("div",{className:"pledge"},"We will never post without your permission"))}})}),_cf.def("React.Screens.ForgottenPasswordScreen",["React","cf","$"],function(e,t,a){return e.createClass({displayName:"ForgottenPasswordScreen",getInitialState:function(){return{mode:"Form",email:""}},getDefaultProps:function(){return{email:"",antiForgeryToken:""}},componentWillMount:function(){},componentDidMount:function(){},sendResetRequest:function(e,a){var n=t.settings.secureUrlBase+"/account/api/sendResetPasswordCode";e.__RequestVerificationToken=t.utils.getAntiForgeryToken(),$.ajax(n,{type:"POST",data:e,dataType:"json",contentType:"application/x-www-form-urlencoded"}).done(function(e){if(e)if("success"===e.status)this.setState({mode:"Confirmation"}),t.Events.Fire("personalisation:forgottenPassword",{action:"submit"});else if("error"===e.status){var a=e.error||"Oh, something went wrong. Give it another try.";this.refs.Email.showValidationState(!0),this.refs.Email.updateValidationMessage(a),this.refs.SendButton.reset()}}.bind(this)).fail(function(e){console.log("fail",e)}.bind(this)).always(function(){a&&a()}.bind(this))},validate:function(){for(var e=a.Deferred(),t=!0,n=["Email"],s={},i=0;i<n.length;i++){var r=this.refs[n[i]];r.isValid()?(s[n[i]]=r.value(),r.showValidationState(!1)):(t=!1,r.showValidationState(!0),r.updateValidationMessage())}return t?e.resolve(s):e.reject("fail"),e.promise()},handleResetClick:function(){var e=this;this.validate().done(function(t){e.setState({email:t.Email}),this.sendResetRequest(t)}.bind(this)).fail(function(){this.refs.SendButton.reset()}.bind(this)).always(function(){}.bind(this))},handleBack:function(){this.props.onBack&&this.props.onBack(),t.Events.Fire("personalisation:forgottenPassword",{action:"back"})},render:function(){var a,n,s=t.React.UiComponents,i="",r="panel fullPanel "+this.state.mode,o=e.createElement("form",null,e.createElement("div",{className:"message"},"Thatâ€™s easy to fix. Just tell us your email address and weâ€™ll send you a link so you can change your password."),e.createElement(s.TextBox,{fieldType:"email",label:"Email address",ref:"Email",inputId:"email",validators:["isNotEmpty","isEmailAddress"],defaultValue:this.props.email}),e.createElement("div",{className:"buttons clearfix"},e.createElement(s.Button,{onClick:this.handleBack,colour:"tarth7"},"Back"),e.createElement(s.Button,{onClick:this.handleResetClick,ref:"SendButton",activeLabel:"Sending..."},"Send email"))),l=e.createElement("div",null,e.createElement("div",{className:"message"},"Weâ€™ve sent a link to ",e.createElement("div",null,this.state.email)," to change your password."));return"Form"==this.state.mode?(i="Oh, forgot your password?",a=o):(i="OK, youâ€™re almost there...",a=l,n=e.createElement("div",{className:"footer"},"Check to see if itâ€™s hiding in your junk mail.")),e.createElement("div",{className:"screen passwordResetScreen cf-ux"},e.createElement("div",{className:r},e.createElement("div",{className:"title"},i),e.createElement("div",{className:"image"}),a,n))}})}),_cf.def("React.Screens.LoginScreen",["React","cf"],function(e,t){return e.createClass({displayName:"LoginScreen",getInitialState:function(){return{}},getDefaultProps:function(){return{onRequestSignup:null,onUnverifiedLogin:null,onResetPassword:null,antiForgeryToken:"none",returnUrl:"/"}},componentDidUpdate:function(){},handleSignupClick:function(e){e.preventDefault(),this.props.onRequestSignup&&this.props.onRequestSignup(e),t.Events.Fire("personalisation:signup",{action:"view",source:"login"})},handleUnverifiedLogin:function(e){this.props.onUnverifiedLogin&&this.props.onUnverifiedLogin(e)},handleResetPassword:function(e){this.props.onResetPassword&&this.props.onResetPassword(e)},handleEmailValidated:function(e){this.props.onEmailValidated&&this.props.onEmailValidated(e)},render:function(){var a=t.React.Forms;return e.createElement("div",{className:"screen loginScreen"},e.createElement("div",{className:"panel formPanel"},e.createElement(a.SocialLoginForm,{antiForgeryToken:this.props.antiForgeryToken,returnUrl:this.props.returnUrl}),e.createElement("div",{className:"separator"},e.createElement("div",null,e.createElement("span",null,"or"))),e.createElement(a.LoginForm,{antiForgeryToken:this.props.antiForgeryToken,returnUrl:this.props.returnUrl,email:this.props.email,onUnverifiedLogin:this.handleUnverifiedLogin,onResetPassword:this.handleResetPassword,onEmailValidated:this.handleEmailValidated}),e.createElement("div",{className:"footer"},"Don't have an account? ",e.createElement("a",{href:"#",onClick:this.handleSignupClick},"Sign up"))),e.createElement("div",{className:"panel carouselPanel"}))}})}),_cf.def("React.Screens.RegisterScreen",["React","cf"],function(e,t){return e.createClass({displayName:"RegisterScreen",getInitialState:function(){return{}},getDefaultProps:function(){return{settings:{}}},handleRegisterComplete:function(e){this.props.onRegisterComplete&&this.props.onRegisterComplete(e)},handleLogInClick:function(e){e.preventDefault(),this.props.onRequestLogIn&&this.props.onRequestLogIn(e),t.Events.Fire("personalisation:login",{action:"view",source:"signup"})},handleEmailValidated:function(e){this.props.onEmailValidated&&this.props.onEmailValidated(e)},render:function(){var a=t.React.Forms,n=this.props.settings.insecureHost+"/terms-of-use/",s=this.props.settings.insecureHost+"/privacy/";return e.createElement("div",{className:"screen registerScreen"},e.createElement("div",{className:"panel formPanel"},e.createElement(a.SocialLoginForm,{antiForgeryToken:this.props.antiForgeryToken,mode:"signup"}),e.createElement("div",{className:"separator"},e.createElement("div",null,e.createElement("span",null,"or"))),e.createElement(a.RegisterForm,{antiForgeryToken:this.props.antiForgeryToken,email:this.props.email,onEmailValidated:this.handleEmailValidated,onRegisterComplete:this.handleRegisterComplete}),e.createElement("div",{className:"alternative"},"Already have an account?  ",e.createElement("a",{href:"#",onClick:this.handleLogInClick},"Log in")),e.createElement("div",{className:"footer"},"By signing up, you agree to our Cheapflights ",e.createElement("a",{href:n,target:"_top"},"Terms of Use")," and ",e.createElement("a",{href:s,target:"_top"},"Privacy Policy"),".")),e.createElement("div",{className:"panel carouselPanel"}))}})}),_cf.def("React.Screens.SignUpCompleteScreen",["React","cf"],function(e,t){return e.createClass({displayName:"SignUpCompleteScreen",getInitialState:function(){return{resendLinkText:"Resend"}},getDefaultProps:function(){return{email:"",activationMode:"FirstTime"}},componentWillMount:function(){},componentDidMount:function(){"PendingActivation"==this.props.activationMode&&(this.sendActivation(this.props.email),t.Events.Fire("personalisation:signup:activate",{action:"view",source:"login"})),window.scrollTo(0,0)},sendActivation:function(e,a){$.ajax(t.settings.secureUrlBase+"/account/api/sendActivation",{type:"POST",data:{emailAddress:this.props.email},dataType:"json",contentType:"application/x-www-form-urlencoded"}).done(function(e){e&&("success"==e.status||"error"==e.status&&debug.error(e))}.bind(this)).fail(function(e){console.log("fail",e)}.bind(this)).always(function(){a&&a()}.bind(this))},handleResendClick:function(e){e.preventDefault(),this.setState({resendLinkText:"Sending..."});var a=this;this.sendActivation(this.props.email,function(){setTimeout(function(){a.setState({resendLinkText:"Sent!"}),setTimeout(function(){a.setState({resendLinkText:"Resend"})},3e3)},1e3)}.bind(this)),t.Events.Fire("personalisation:signup:activate",{action:"resendEmail"})},render:function(){var t="";t="PendingActivation"==this.props.activationMode?"Oh, you havenâ€™t activated your accountâ€¦":"OK, you're almost there...";var a="panel fullPanel "+this.props.activationMode;return e.createElement("div",{className:"screen signUpCompleteScreen cf-ux"},e.createElement("div",{className:a},e.createElement("div",{className:"title"},t),e.createElement("div",{className:"image"},"Â "),e.createElement("div",{className:"message"},e.createElement("span",{className:"text light"},"We've sent a link to"),e.createElement("div",{className:"text regular"},this.props.email),e.createElement("span",{className:"text light"},"to activate your account.")),e.createElement("div",{className:"resend text light"},"Didn't get an email from us? ",e.createElement("a",{href:"#",onClick:this.handleResendClick},this.state.resendLinkText)),e.createElement("div",{className:"footer"},"Check to see if it's hiding in your junk mail.")))}})}),_cf.def("React.Modals.HpdNlSignupModal",["React","cf","settings"],function(e,t,a){return e.createClass({displayName:"HpdNlSignupModal",statics:{open:function(e){t.React.UiComponents.Modal.open(t.React.Modals.HpdNlSignupModal,e)}},getInitialState:function(){return{shouldShowCloseIcon:!1,shouldShowTRUSTe:this.props.modalProperties.ShouldShowTRUSTe,shouldShowTravolution:this.props.modalProperties.ShouldShowTravolution}},getDefaultProps:function(){return{}},_handleClose:function(){this._fireCloseIconTracking()},_handleEmailValidated:function(e){var t="";e.isValid&&(t=e.value),this.state.email!=t&&this.setState({email:t})},_handleSignupButtonClick:function(e){this._checkValidation().done(this._submit).fail(function(){this.refs.SignUpButton.reset()}.bind(this)).always(function(){})},_completeSignupProcess:function(){var e=new t.cookie("cf-nl4");e.value(!0),e.savePermanently(),this.setState({hasSubscribed:!0}),this._fireSignupCompleteTracking(),setTimeout(function(){t.React.UiComponents.Modal.close()},4e3)},_fireSignupCompleteTracking:function(){var e=$("meta[name='WT.cg_n']").attr("content");t.Events.Fire("newsletterSignup:subscribe",e)},_fireCloseIconTracking:function(){var e=$("meta[name='WT.cg_n']").attr("content");t.Events.Fire("newsletterSignup:close",e)},_fireNotInterestedTracking:function(){t.Events.Fire("global:track",{action:"Click",type:"DealsCTA"})},_submit:function(e){e.List=this.props.modalProperties.List,e.Source=this.props.modalProperties.Source,e.UID=this.props.modalProperties.UID,e.isHpdSignup=this.props.modalProperties.IsHpdSignup,$.ajax("/newsletter/subscribe",{type:"POST",data:e,dataType:"json",contentType:"application/x-www-form-urlencoded"}).done(function(t){if(t)if(t.success)this.setState({shouldShowCloseIcon:!0}),this._completeSignupProcess();else if(!t.success&&t.errors&&t.errors.length>0){var a=t.errors[0],n=this.errorHandlers[a];n?n.bind(this)(e):this.errorHandlers.Default.bind(this)(e)}}.bind(this)).fail(function(e){}.bind(this)).always(function(e){}.bind(this))},_checkValidation:function(){for(var e=jQuery.Deferred(),t=!0,a=["Email"],n={},s=0;s<a.length;s++){var i=this.refs[a[s]];i.isValid()?(n[a[s]]=i.value(),i.showValidationState(!1)):(t=!1,i.showValidationState(!0),i.updateValidationMessage())}return t?e.resolve(n):e.reject("fail"),e.promise()},render:function(){var a=["isNotEmpty","isEmailAddress"],n=t.React.UiComponents,s=this.state.shouldShowTravolution,i=s?"section travolution":"section travolution invisible",r="";if(this.state.shouldShowTRUSTe){var o=(this.props.modalProperties.AccreditationAssociateId,this.props.modalProperties.AccreditationValidationId),l="//privacy.truste.com/privacy-seal/Cheapflights-Ltd-/validation?rid="+o,c="//privacy-policy.truste.com/privacy-seal/Cheapflights-Ltd-/seal?rid="+o;r=e.createElement("div",{className:"section accreditation"},e.createElement("a",{href:l,title:"TRUSTe online privacy certification",target:"_blank"},e.createElement("img",{src:c,alt:"TRUSTe online privacy certification"})),e.createElement("p",null,e.createElement("span",null,"Your Data is fully protected.")," Cheapflights Ltd is a certified licensee of TRUSTeÂ® Email Accreditation Program. The email practices of Cheapflights Ltd have been reviewed by TRUSTe for compliance with our strict program."))}var u=this.state.hasSubscribed,d=u?"invisible":"",h=u?"":"invisible";return e.createElement(n.Modal,{id:"hpd-nl-signup-modal",onClose:this._handleClose,shouldShowHeaderText:this.state.shouldShowHeaderText,shouldShowCloseIcon:this.state.shouldShowCloseIcon},e.createElement("div",{ref:"screen",className:"screen"},e.createElement("div",{className:"panel"},e.createElement("div",{id:"signup-screen",className:d},e.createElement("div",{className:"section intro"},e.createElement("h1",null,"Become a member for free!"),e.createElement("p",null,"Join over 10 million of our subscribers."),e.createElement("p",null,"Gain full access to our exclusive hot travel deals and be the first to receive them every week.")),e.createElement("div",{className:"section signup"},e.createElement("p",null,"I would like Cheapflights to send their best deals to:"),e.createElement(n.TextBox,{fieldType:"email",label:"Email address",inputId:"email",ref:"Email",validators:a,onValidated:this._handleEmailValidated}),e.createElement(n.Button,{ref:"SignUpButton",onClick:this._handleSignupButtonClick,activeLabel:"Signing you up...",colour:"sunspear"},"Sign up for free"),e.createElement("a",{href:this.props.modalProperties.HomepageUrl,onClick:this._fireNotInterestedTracking},"No thanks. Take me back to the homepage.")),e.createElement("div",{className:"section privacy"},e.createElement("p",null,"Once you've received a confirmation email you'll be able to choose which of our newsletters you would like to receive."),e.createElement("p",null,"Your privacy is important to us; that's why we will never share your information with third parties and have a spam free policy. See our ",e.createElement("a",{href:this.props.modalProperties.PrivacyPolicyUrl},"privacy policy"),". You can ",e.createElement("a",{href:this.props.modalProperties.UnsubscribeUrl},"unsubscribe")," at any time."),r),e.createElement("div",{className:i},e.createElement("span",{className:"travolution-logo"}),"Winner of the Travolution Award for 'Best Travel Deals Publisher 2014'")),e.createElement("div",{id:"thank-you-screen",className:h},e.createElement("h1",null,"Thanks for signing up!"),e.createElement("i",{className:"icon icon-tick"}),e.createElement("h2",null,"You're now signed up to the Cheapflights newsletter."),e.createElement("p",null,"Your deals will appear in a moment. If they don't, please refresh the page.")))))}})}),_cf.def("React.Modals.LoginSignupModal",["React","cf","settings"],function(e,t){return e.createClass({displayName:"LoginSignupModal",antiForgeryToken:"",statics:{open:function(e){t.React.UiComponents.Modal.open(t.React.Modals.LoginSignupModal,e)}},getInitialState:function(){return{activeScreen:this.props.initialScreen||"login",email:"",activationMode:"FirstTime"}},getDefaultProps:function(){return{antiForgeryToken:"",initialScreen:"login",returnUrl:"/",isIframe:!1}},componentDidMount:function(){this.antiForgeryToken=_cf.utils.getAntiForgeryToken()},componentWillUnmount:function(){},componentDidUpdate:function(){},handleSelectTab:function(e){this.handleSelectScreen(e.key),t.Events.Fire("personalisation:"+e.key,{action:"view",source:"tab"})},handleSelectScreen:function(e){this.setState({activeScreen:e})},handleRequestSignup:function(){this.handleSelectScreen("signup")},handleRequestLogIn:function(){this.handleSelectScreen("login")},handleRegisterComplete:function(e){this.setState({activationMode:e.mode,email:e.email}),this.handleSelectScreen("signupComplete")},handleUnverifiedLogin:function(e){this.setState({activationMode:e.mode,email:e.email}),this.handleSelectScreen("signupComplete")},handleResetPassword:function(e){this.setState({email:e.email}),this.handleSelectScreen("resetPassword")},handleClose:function(){this.props.onClose&&this.props.onClose();var e=null;switch(this.state.activeScreen){case"login":case"signup":e=this.state.activeScreen;break;case"resetPassword":e="forgottenPassword";break;case"signupComplete":e="signup:activate"}e&&t.Events.Fire("personalisation:"+e,{action:"close"})},handleEmailValidated:function(e){var t="";e.isValid&&(t=e.value),this.state.email!=t&&this.setState({email:t})},render:function(){var a={Modal:e.createFactory(t.React.UiComponents.Modal),LoginScreen:e.createFactory(t.React.Screens.LoginScreen),RegisterScreen:e.createFactory(t.React.Screens.RegisterScreen),SignUpCompleteScreen:e.createFactory(t.React.Screens.SignUpCompleteScreen),ForgottenPasswordScreen:e.createFactory(t.React.Screens.ForgottenPasswordScreen)},n=[{key:"login",label:"Log in",onClick:this.handleSelectTab,isSelected:"login"==this.state.activeScreen},{key:"signup",label:"Sign up",onClick:this.handleSelectTab,isSelected:"signup"==this.state.activeScreen}],s=this.antiForgeryToken,i="";switch(this.state.activeScreen){case"login":i=a.LoginScreen({antiForgeryToken:s,email:this.state.email,onRequestSignup:this.handleRequestSignup,onUnverifiedLogin:this.handleUnverifiedLogin,onResetPassword:this.handleResetPassword,onEmailValidated:this.handleEmailValidated,returnUrl:this.props.returnUrl});break;case"signup":i=a.RegisterScreen({antiForgeryToken:s,email:this.state.email,onRegisterComplete:this.handleRegisterComplete,onRequestLogIn:this.handleRequestLogIn,onEmailValidated:this.handleEmailValidated,settings:this.props.settings});break;case"signupComplete":i=a.SignUpCompleteScreen({email:this.state.email,activationMode:this.state.activationMode}),n=[];break;case"resetPassword":i=a.ForgottenPasswordScreen({antiForgeryToken:s,email:this.state.email,onBack:this.handleRequestLogIn}),n=[]}return a.Modal({tabs:n,onClose:this.handleClose,isIframe:this.props.isIframe},i)}})}),_cf.def("React.Modals.NewsletterSubscribeModal",["React","cf"],function(e,t){return e.createClass({statics:{open:function(e){t.React.UiComponents.Modal.open(t.React.Modals.NewsletterSubscribeModal,e)}},getInitialState:function(){return{isSubscribedBoxChecked:!1}},getDefaultProps:function(){return{emailAddress:""}},componentDidMount:function(){this._setSubscribeModalFlag(),t.Events.Fire("personalisation:login:firstTime",{action:"view"})},_setSubscribeModalFlag:function(){t.auth(function(e){e&&e.IsAuthenticated&&$.ajax({type:"GET",url:t.settings.secureUrlBase+"/account/api/setSubscribeModalFlag?callback=?",jsonp:"_cf.auth",contentType:"application/json; charset=utf-8",dataType:"jsonp"}).done(function(e){}).fail(function(e){})})},_handleClose:function(){t.React.UiComponents.Modal.close()},_printGreeting:function(){var e=""!==this.props.firstName&&null!==this.props.firstName?" "+this.props.firstName:"",t="Well, hello"+e;return t},_handleSubmit:function(){var e=this;t.Events.Fire("personalisation:login:firstTime",{action:"save"});var a=this.state.selectedDepartureArea,n={firstName:this.props.firstName,lastName:this.props.lastName,emailAddress:this.props.emailAddress,selectedDepartureArea:a};this.state.isSubscribedBoxChecked?e._sendSubscribeRequest(n):this._handleClose()},_sendSubscribeRequest:function(e){$.ajax(t.settings.secureUrlBase+"/account/api/subscribe",{type:"POST",data:e,dataType:"json",contentType:"application/x-www-form-urlencoded"}).done(function(t){if(t&&t.success)if(t.success===!0)this._handleClose();else if(t.success===!1&&t.message){var a=t.message,n=this.errorHandlers[a];n?n.bind(this)(e):this.errorHandlers.Default.bind(this)(e)}}.bind(this)).fail(function(e){}.bind(this)).always(function(e){}.bind(this))},_handleCheckbox:function(e){this.setState({isSubscribedBoxChecked:e.target.checked}),t.Events.Fire("personalisation:login:firstTime",{action:"toggle",value:e.target.checked?"on":"off"})},_handleDepartureAreaFocus:function(){
t.Events.Fire("personalisation:login:firstTime",{action:"focusSelectBox"})},_handleDepartureAreaSelect:function(e){this.setState({selectedDepartureArea:e.value})},handleClose:function(){t.Events.Fire("personalisation:login:firstTime",{action:"close"})},render:function(){var a,n,s=t.React.UiComponents,i=this._printGreeting(),r={SelectBox:e.createFactory(_cf.React.UiComponents.SelectBox)};return this.props.departurePoints.length>0&&(a=e.createElement("p",null,"One more thing... Where do you usually fly from?"),n=r.SelectBox({label:"Select an area",selectedOption:null,keyPropertyName:"Value",valuePropertyName:"Value",textPropertyName:"DisplayName",onChange:this._handleDepartureAreaSelect,onFocus:this._handleDepartureAreaFocus},this.props.departurePoints)),e.createElement(s.Modal,{id:"newsletter-login-modal",onClose:this.handleClose},e.createElement("div",{ref:"screen",className:"screen dynamic"},e.createElement("div",{className:"panel"},e.createElement("div",{className:"title"},i),e.createElement("p",null,"You'll always travel on the cheap with the best deals right to your inbox."),e.createElement(s.CheckBox,{multiLine:"true",value:this.state.isSubscribedBoxChecked,ref:"Subscribe",onChange:this._handleCheckbox},"I want to receive ",this.props.market," newsletters filled with the best travel deals including flight sales, hotel discounts, getaway packages, cruise specials and more."),a,n,e.createElement("p",null,"Don't worry, you can change your preferences at any time."),e.createElement(s.Button,{ref:"SubmitButton",activeLabel:"Saving...",colour:"sunspear",onClick:this._handleSubmit},"Save"))))}})}),_cf.def("React.Modals.NPSModal",["React","jQuery","Modernizr","cf"],function(e,t,a,n){var s=n.React.UiComponents;return e.createClass({displayName:"NPSModal",statics:{npsShown:!1,tryShow:function(){n.React.Modals.NPSModal.npsShown||s.Modal.open(n.React.Modals.NPSModal,null)}},getInitialState:function(){return{comments:null,score:null,formSubmitted:!1}},handleCommentsChange:function(e){this.setState({comments:e.target.value})},handleScoreChange:function(e){this.setState({score:e.target.value})},handleClose:function(){t.post("/api/nps/close"),n.React.Modals.NPSModal.npsShown=!0},handleCloseFormSubmitted:function(){s.Modal.close(),n.React.Modals.NPSModal.npsShown=!0},handleSubmit:function(){var e=n.layout.isMobile()?"MOB":n.layout.isPortrait()?"TAB":"DESK",a=n.settings.criteria.origin,s=n.settings.criteria.destination,i=a&&a.regionCode?a.regionCode:"",r=s&&s.regionCode?s.regionCode:"",o={comments:this.state.comments,criteria:n.utils.format("Origin={0}, Destination={1}",i,r),score:this.state.score,view:"WEB-"+e};t.post("/api/nps/submit",o);var l=this;setTimeout(function(){l.setState({formSubmitted:!0})},1e3)},_getListItems:function(){var t,a=[],n=this;for(t=0;t<=10;t++)a.push(t);return a.map(function(t){var a="nps-"+t;return e.createElement("li",{key:a},e.createElement("input",{name:"nps",id:a,onClick:n.handleScoreChange,type:"radio",value:t}),e.createElement("label",{htmlFor:a},t))})},render:function(){var t=null!==this.state.score,i=a.input.placeholder,r=n.utils.classNames("nps",{submitted:this.state.formSubmitted}),o=n.utils.classNames("comments-container",{visible:t,"legacy-support":!i}),l="What's the main reason for your score? (Optional)",c=i?null:e.createElement("span",null,l);return e.createElement(s.Modal,{className:r,onClose:this.handleClose},e.createElement("div",{className:"nps-content-container"},e.createElement("form",null,e.createElement("h2",null,"Tell us what you think"),e.createElement("p",null,"How likely is it that you would recommend Cheapflights to a friend or colleague?"),e.createElement("span",{className:"scale-label-lower"},"Not at all likely"),e.createElement("span",{className:"scale-label-upper"},"Extremely likely"),e.createElement("ol",null,this._getListItems()),e.createElement("div",{className:o},c,e.createElement("textarea",{maxLength:"1000",name:"comments",onChange:this.handleCommentsChange,placeholder:l,value:this.state.comments})),e.createElement("div",{className:"buttons"},e.createElement(s.Button,{activeLabel:"Done",isDisabled:!t,label:"Submit",onClick:this.handleSubmit}))),e.createElement("div",{className:"thank-you"},e.createElement("h2",null,"Thanks for your feedback"),e.createElement("i",{className:"icon icon-tick"}),e.createElement("div",{className:"buttons"},e.createElement(s.Button,{label:"Close",onClick:this.handleCloseFormSubmitted})))))}})}),_cf.def("React.Modals.RecentSearchesModal",["React","cf","settings","moment"],function(e,t,a,n){var s=function(e){return JSON.stringify(e,function(e,t){return this[e]instanceof Date?n(t).toNET():t})},i=e.createClass({displayName:"RecentSearchesModal",getInitialState:function(){return{recentSearches:null}},getDefaultProps:function(){return{isIframe:!1}},componentDidMount:function(){t.auth(function(e){var t=!1,a=[];if(e&&(t=e.IsAuthenticated,e.RecentSearches&&e.RecentSearches.length>0))for(var n=0;n<e.RecentSearches.length;n++){var s=JSON.parse(e.RecentSearches[n]);a.push(s)}this.setState({isAuthenticated:t,recentSearches:a})}.bind(this))},handleClose:function(){t.Events.Fire("personalisation:recentSearches",{action:"close"})},clearSearches:function(){var e={__RequestVerificationToken:t.utils.getAntiForgeryToken()};$.ajax({type:"POST",url:t.settings.secureUrlBase+"/account/api/deleteSearches",data:e}).done(function(){this.setState({recentSearches:[]})}.bind(this)),t.Events.Fire("personalisation:recentSearches",{action:"clear all"})},render:function(){var a,n=t.React.UiComponents,s=[];if(null!==this.state.recentSearches){for(var r=0;r<this.state.recentSearches.length;r++){var o=this.state.recentSearches[r];o.searchCriteria&&o.searchCriteria.origin&&o.searchCriteria.destination&&s.push(e.createElement(i.SearchItem,{key:r,search:o}))}a=this.state.recentSearches.length>0?e.createElement("div",{className:"main-section"},e.createElement("ul",{className:"search-list"},s),e.createElement("div",{className:"footer clearfix"},e.createElement("div",{className:"left"},"We're showing up to 5 of your latest searches."),e.createElement("div",{className:"right"},e.createElement("a",{href:"#",onClick:this.clearSearches},"Clear all")))):e.createElement("div",{className:"no-results"},e.createElement("div",{className:"image"}),e.createElement("p",{className:"text"},"No searches hiding here..."))}else a=e.createElement("div",{className:"loading"});return e.createElement(n.Modal,{id:"recent-searches-modal",isIframe:this.props.isIframe,onClose:this.handleClose,shouldShowHeaderText:!0,shouldShowCloseIcon:!0},e.createElement("div",{className:"screen searchResultsScreen"},e.createElement("div",{className:"panel"},e.createElement("h2",{className:"title"},"My searches"),a)))}});return i.SearchItem=e.createClass({displayName:"SearchItem",getInitialState:function(){return{shouldShowAllInfo:!1}},toggleDisplayAllInfo:function(e){e.preventDefault(),e.stopPropagation(),this.setState({shouldShowAllInfo:!this.state.shouldShowAllInfo})},getTicketClassString:function(e){switch(e){case 0:return"Economy";case 1:return"Premium Economy";case 2:return"Business Class";case 3:return"First Class";default:return"--"}},getMoreInfo:function(){var t=this.props.search.searchCriteria;return e.createElement("div",null,e.createElement(i.DataRow,{className:"adults",label:"Adults",info:t.adults}),e.createElement(i.DataRow,{className:"children",label:"Children",info:t.children}),e.createElement(i.DataRow,{className:"infants",label:"Infants",info:t.infants}),e.createElement(i.DataRow,{className:"class",label:"Class",info:this.getTicketClassString(t.ticketClass)}))},getSimpleDate:function(e){var t=e.year,a=e.month,s=e.day,i=e.hour,r=e.minute,o=e.second;return n({year:t,month:a-1,day:s,hour:i,minute:r,second:o})},getFormattedDate:function(e){return this.getSimpleDate(e).format("ddd, DD MMM YYYY")},getDurationFromNow:function(e){return this.getSimpleDate(e).fromNow()},onSearch:function(){t.Events.FireSynchronous("personalisation:recentSearches",{action:"search"});var e=this.props.search.searchCriteria,a=s(e);$.ajax({type:"POST",url:t.settings.secureUrlBase+"/search",data:a,dataType:"json",contentType:"application/json"}).done(function(e){switch(e.resultType){case"repost":t.utils.postMessage("modal:startSearch",{url:e.url})}}).fail(function(e){console.log("The search could not be started.",e)}).always(function(){})},render:function(){var t,a,n=this.props.search.searchCriteria,s=this.props.search.searchDate;this.state.shouldShowAllInfo?(a="Less...",t=this.getMoreInfo()):a="More...";var r=n.returningOn?this.getFormattedDate(n.returningOn):"-";return e.createElement("li",{className:"search-history-item clearfix"},e.createElement("div",{className:"left"},e.createElement("div",{className:"search-criteria"},e.createElement("div",{className:"route"},e.createElement("i",{className:"icon-airplane-filled"}),e.createElement("div",{className:"route-info"},e.createElement("strong",null,n.origin.shortName)," to",e.createElement("strong",null," ",n.destination.shortName))),e.createElement(i.DataRow,{className:"departure",label:"Leaving on",info:this.getFormattedDate(n.departingOn)}),e.createElement(i.DataRow,{className:"return",label:"Returning on",info:r}),t),e.createElement("a",{href:"#",onClick:this.toggleDisplayAllInfo},a)),e.createElement("div",{className:"right"},e.createElement("div",{className:"metadata"},e.createElement("span",{className:"label"},"Searched"),e.createElement("span",{className:"text"},this.getDurationFromNow(s))),e.createElement("button",{className:"cfux-button cfux-colour-sunspear",onClick:this.onSearch},"Search")))}}),i.DataRow=e.createClass({displayName:"DataRow",render:function(){var a=t.utils.classNames("other-info",this.props.className);return e.createElement("div",{className:a},e.createElement("span",{className:"label"},this.props.label),e.createElement("div",{className:"info"},this.props.info))}}),i}),_cf.def("React.Layout.PageHeader",["React","cf","$"],function(e,t,a){return e.createClass({displayName:"PageHeader",getInitialState:function(){return{shouldRenderLinks:!1,isAuthenticated:!1,currentUser:null}},getDefaultProps:function(){return{siteCode:"CFUS",countryName:"",isPersonalisationEnabled:!1,includeLogo:!0,includeProductNav:!0,homepageUrl:"",flightsUrl:"",hotelsUrl:"",carsUrl:"",isCarHireProductEnabled:!1}},componentWillMount:function(){this.props.isPersonalisationEnabled&&t.auth(function(e){var t=!1;e&&(t=e.IsAuthenticated),this.setState({isAuthenticated:t,currentUser:e})}.bind(this))},componentDidMount:function(){this.props.isPersonalisationEnabled&&this.setState({shouldRenderLinks:!0})},handleLogOut:function(){location.href=t.settings.secureUrlBase+"/account/api/logout"},handleLogIn:function(e){e.preventDefault(),t.modal.iframe.open(t.settings.secureUrlBase+"/modal/accountGateway?returnUrl="+encodeURI(window.location.href))},handleSignUp:function(e){e.preventDefault(),t.modal.iframe.open(t.settings.secureUrlBase+"/modal/accountGateway?defaultView=signup")},handleRecentSearches:function(e){e.preventDefault(),t.modal.iframe.open(t.settings.secureUrlBase+"/modal/recentSearches?returnUrl="+encodeURI(window.location.href),{classList:"recent-searches-iframe"})},render:function(){var a=(t.React.Elements,null),a=(t.settings.secureUrlBase+"/my-account",[]),n=0;this.state.currentUser&&this.state.currentUser.RecentSearches&&(n=this.state.currentUser.RecentSearches.length),this.state.shouldRenderLinks&&(a=null!=this.state.currentUser&&this.state.isAuthenticated?[e.createElement("div",{id:"my-account-menu",className:"chooser show",key:"myaccountmenu"},e.createElement("i",{className:"icon-person-account-outline"}),e.createElement("label",null,e.createElement("span",{className:"text"},"My account")),e.createElement("span",{className:"icon-down-triangle arrow"})),e.createElement("a",{className:"user-searches",onClick:this.handleRecentSearches,key:"usersearches"},e.createElement("i",{className:"icon-my-searches"}),e.createElement("span",{className:"text"},"My searches"),e.createElement("span",{className:"searches-count"},n))]:[e.createElement("a",{href:"#",onClick:this.handleSignUp,key:"signup"},"Sign up"),e.createElement("a",{href:"#",onClick:this.handleLogIn,key:"login"},"Log in")]);var s="",i="";this.props.includeLogo&&(i=e.createElement("a",{className:"logo-small",href:this.props.homepageUrl,"data-track":"Click_HPlogo"},e.createElement("span",{className:"roundel"})),s=e.createElement("div",{className:"logo"},e.createElement("div",{id:"site-logo"},e.createElement("a",{className:"cf-site-logo-background",href:this.props.homepageUrl,"data-track":"Click_HPlogo"},"Â "))));var r="",o=this.props,l=o.carsUrl,c=o.dealsUrl,u=o.flightsUrl,d=o.hasHandPickedDeals,h=o.hotelsUrl,p=o.includeProductNav,m=o.isCarHireProductEnabled,f=o.selectedNavigationItem;if(p){var g=[{text:"Flights",url:u},{text:"Hotels",url:h}];m&&g.push({text:"Cars",url:l}),d&&g.push({text:"Deals",url:c}),r=e.createElement("ul",{id:"product-selector"},g.map(function(t){return e.createElement("li",{className:"product",key:t.text.toLowerCase()},e.createElement("a",{className:f===t.text.toLowerCase()?"default-selected":"","data-track":"Click","data-track-type":t.text,"data-track-subtype":"",href:t.url},t.text))}))}var v="cfui-flagorb site-icon "+this.props.siteCode.toLowerCase()+" "+this.props.siteCode;return e.createElement("div",{className:"furniture-container"},e.createElement("div",{className:"content-container clearfix",id:"furniture"},e.createElement("section",{className:"left"},i,s,r),e.createElement("section",{className:"right"},a,e.createElement("div",{id:"locale-chooser",className:"chooser show"},e.createElement("span",{className:v},"Â "),e.createElement("label",null,e.createElement("span",{className:"codes","data-type":"currency"})),e.createElement("span",{className:"icon-down-triangle arrow"}),e.createElement("span",{className:"vege-burger"},e.createElement("i",{className:"icon-hamburger-01"}))))))}})}),_cf.def("React.Elements.AccountSectionDeeplinkMenu",["React","cf"],function(e,t){return e.createClass({displayName:"AccountSectionDeeplinkMenu",getInitialState:function(){return{isAuthenticated:!1,currentUser:null}},componentDidMount:function(){this.props.isPersonalisationEnabled&&t.auth(function(e){var t=!1;e&&(t=e.IsAuthenticated),this.setState({isAuthenticated:t,currentUser:e})}.bind(this))},handleLogOut:function(){t.auth(function(e){e&&(e.IsAuthenticated=!1)}),t.dispatch(t.settings.secureUrlBase+"/log-out")},render:function(){var a,n=t.settings.secureUrlBase+"/my-account/profile",s=t.settings.secureUrlBase+"/my-account/preferences",i=t.settings.secureUrlBase+"/my-account/newsletters",r=_cf.settings.site.isNewsletterEnabled?e.createElement("a",{href:i},"Newsletters"):"";if(null!=this.state.currentUser&&this.state.isAuthenticated){var o=this.state.currentUser.FirstName;a=e.createElement("div",{className:"account"},e.createElement("div",{className:"group-heading account"},"My account"),e.createElement("a",{href:n},"Profile"),e.createElement("a",{href:s},"Preferences"),r,e.createElement("div",{className:"not-firstname"},e.createElement("span",{className:"salutation"},"Not ",e.createElement("span",{className:"first-name"},o),"?"),e.createElement("a",{href:"#",onClick:this.handleLogOut},"Log out")))}return e.createElement("div",null,a)}})}),_cf.def("React.Elements.AccountSettingsMenu",["React","cf"],function(e,t){return e.createClass({displayName:"AccountSettingsMenu",getInitialState:function(){return{isAuthenticated:!1,currentUser:null}},componentDidMount:function(){this.props.isPersonalisationEnabled&&t.auth(function(e){var t=!1;e&&(t=e.IsAuthenticated),this.setState({isAuthenticated:t,currentUser:e})}.bind(this))},showRecentSearches:function(e){e.preventDefault(),t.modal.iframe.open(t.settings.secureUrlBase+"/modal/recentSearches?returnUrl="+encodeURI(window.location.href),{classList:"recent-searches-iframe"})},handleLogOut:function(){location.href=t.settings.secureUrlBase+"/account/api/logout"},render:function(){var a,n=t.settings.secureUrlBase+"/my-account";if(null!=this.state.currentUser&&this.state.isAuthenticated){var s=this.state.currentUser.FirstName;a=e.createElement("div",{className:"account"},e.createElement("div",{className:"group-heading account"},"Account"),e.createElement("a",{href:n}," My account "),e.createElement("a",{onClick:this.showRecentSearches},"My searches"),e.createElement("div",{className:"not-firstname"},e.createElement("span",{className:"salutation"},"Not ",s,"?"),e.createElement("a",{href:"#",onClick:this.handleLogOut},"Log out")))}return e.createElement("div",null,a)}})}),_cf.def("React.Elements.HomepageLogo",["React","cf","$"],function(e,t,a){return e.createClass({displayName:"HomepageLogo",getInitialState:function(){return{isAnimationStarted:!1}},getDefaultProps:function(){return{siteName:"Cheapflights",animationTimeout:1e3}},componentWillMount:function(){},componentDidMount:function(){var e=this;setTimeout(function(){e.setState({isAnimationStarted:!0})},e.props.animationTimeout)},render:function(){var t=this.state.isAnimationStarted?"logo anim":"logo";return e.createElement("div",{className:"logo-container",itemScope:!0,itemType:"http://schema.org/Organization"},e.createElement("a",{href:"/",className:t,ref:"logo",itemProp:"url","data-track":"Click_HPlogo","data-track-type":"Filter","data-track-subtype":!0,title:this.props.siteName,"aria-label":"Cheap Flights"},"Cheapflights",e.createElement("span",{className:"plane"},e.createElement("span",{className:"contrail"},"Â "))),e.createElement("span",{className:"tag-line"},"Smart search. Made simple."))}})});