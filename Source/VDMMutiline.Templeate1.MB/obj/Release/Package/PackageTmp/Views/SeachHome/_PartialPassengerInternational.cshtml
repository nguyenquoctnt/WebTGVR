@using VDMMutiline.SharedComponent.Constants
@using VDMMutiline.SeachAndBook
@using System.Linq;
@model SeachParam
@{
    var listBaggageDepart = new List<ApiClient.Models.Baggage>();
    var listBaggageReturn = new List<ApiClient.Models.Baggage>();
    if (Model.BaggageInfo != null)
    {
        if (Model.BaggageInfo.ListBaggage == null)
        {
            Model.BaggageInfo.ListBaggage = new List<ApiClient.Models.Baggage>().ToArray();
        }
        listBaggageDepart = Model.BaggageInfo.ListBaggage.Where(z => z.Route == Model.DepartureAirportCode + Model.DestinationAirportCode).ToList();
        if (listBaggageDepart.Count() > 0)
        {
            var list = new List<ApiClient.Models.Baggage>();
            list.Insert(0, new ApiClient.Models.Baggage() { Code = "", Name = "Chọn hành lý ký gửi" });
            listBaggageDepart = (from Baggage in listBaggageDepart
                                 select new ApiClient.Models.Baggage()
                                 {
                                     Currency = Baggage.Currency,
                                     Airline = Baggage.Airline,
                                     Name = "Tổng khối lượng " + Baggage.Name + ":" + Baggage.Price.ToString("n0") + " " + Baggage.Currency,
                                     Code = Baggage.Code,
                                     Route = Baggage.Route,
                                     Leg = Baggage.Leg,

                                 }).ToList();
            list.AddRange(listBaggageDepart.ToList());
            listBaggageDepart = list;
        }
        listBaggageReturn = Model.BaggageInfo.ListBaggage.Where(z => z.Route == Model.DestinationAirportCode + Model.DepartureAirportCode).ToList();
        if (listBaggageReturn.Count > 0)
        {

            var list = new List<ApiClient.Models.Baggage>();
            list.Insert(0, new ApiClient.Models.Baggage() { Code = "", Name = "Chọn hành lý ký gửi" });
            listBaggageReturn = (from Baggage in listBaggageReturn
                                 select new ApiClient.Models.Baggage
                                 {
                                     Currency = Baggage.Currency,
                                     Airline = Baggage.Airline,
                                     Name = "Tổng khối lượng " + Baggage.Name + ":" + Baggage.Price.ToString("n0") + " " + Baggage.Currency,
                                     Code = Baggage.Code,
                                     Route = Baggage.Route,
                                     Leg = Baggage.Leg,
                                 }).ToList();
            list.AddRange(listBaggageReturn.ToList());
            listBaggageReturn = list;
        }
    }
}

<input type="hidden" id="hdfNumbPax" value="1">
<input type="hidden" id="hdfGrandPrice" value="">
<input type="hidden" name="TotalBaggagePrice" id="hdfTotalBaggagePrice" value="300000">

@if (Model.BaggageInfo != null)
{
    for (int i = 0; i < Model.BaggageInfo.ListBaggage.ToList().Count; i++)
    {
        @Html.HiddenFor(z => Model.BaggageInfo.ListBaggage[i].Code);
        @Html.HiddenFor(z => Model.BaggageInfo.ListBaggage[i].Airline);
        @Html.HiddenFor(z => Model.BaggageInfo.ListBaggage[i].Currency);
        @Html.HiddenFor(z => Model.BaggageInfo.ListBaggage[i].Name);
        @Html.HiddenFor(z => Model.BaggageInfo.ListBaggage[i].Price);
        @Html.HiddenFor(z => Model.BaggageInfo.ListBaggage[i].Value);
        @Html.HiddenFor(z => Model.BaggageInfo.ListBaggage[i].Route);
        @Html.HiddenFor(z => Model.BaggageInfo.ListBaggage[i].Leg);
    }
    foreach (var item in Model.BaggageInfo.ListBaggage)
    {
        <input type="hidden" id="hdfBaggage_@item.Code@item.Route" value="@item.Price" />
    }
}
<div class="bgSelect1 pass2" style="font-size: 12px;">




    @for (int i = 0; i < Model.Passengerlist.Count; i++)
    {
        @Html.HiddenFor(model => Model.Passengerlist[i].TypeID)
        switch (Model.Passengerlist[i].TypeID)
        {
            case 1:
                {

                    <div class="row hk  " style="border-bottom: 1px solid #f4f4f4;padding-top: 12px;padding-bottom: 0px;">
                        <span class="">HÀNH KHÁCH @(i + 1). </span>
                        <span class="">
                            @VDMMutiline.Resource.App_GlobalResources.weblanguage.Adults
                        </span>
                        <input type="button" class=" but  minusp1" value="" />
                    </div>
                    <div class="@string.Format("addp",i)">
                        <div class="row bbot btop" style="    border: none;   padding-bottom: 0px;padding-top: 5px;">
                            <div class="col-md-2 col-xs-3 col-lg-3 col-sm-3 " style="padding-left: 0px;padding-right: 0px">
                                <span class="money">QUÝ DANH</span>
                                <br />
                                @Html.DropDownListFor(model => Model.Passengerlist[i].Sex, Constant.Gender.dctName.Select(s =>
                                    new SelectListItem { Selected = s.Key == Model.Passengerlist[i].Sex, Text = s.Value, Value = s.Key }),
                                    new { @required = "required", @class = "form-control sexoption" })
                            </div>
                            <div class="col-md-9 col-xs-9 col-lg-9 col-sm-9 " style="padding-right: 0px">
                                <span class="money">HỌ VÀ TÊN</span><br />
                                @Html.TextBoxFor(x => x.Passengerlist[i].FullName, new {@data_parsley_FullnameValidate="", @style = "text-transform: uppercase;", @required = "required", @class = "form-control", @placeholder = VDMMutiline.Resource.App_GlobalResources.weblanguage.Full_name })
                            </div>
                        </div>


                        <div class="row bbot" style="    border: none;   padding-bottom: 0px;padding-top: 5px;display: none">

                            <label class="money col-md-3 col-xs-3 col-lg-3 col-sm-3" style="padding-left: 0px;padding-right: 0px">Ngày sinh</label>
                            <div class="col-md-9 col-xs-9 col-lg-9 col-sm-9 " style="padding-right: 0px">
                                <input name='@string.Format("txtDate{0}",i)' type="text" id="@string.Format("txtDate{0}",i)" placeholder="@VDMMutiline.Resource.App_GlobalResources.weblanguage.Birthday" class="form-control">
                            </div>
                        </div>
                        @if (Model.BaggageInfo != null)
                        {
                            <div class="row bbot" style="    border: none;   padding-bottom: 0px;padding-top: 5px;">
                                <label class="money col-md-3 col-xs-3 col-lg-3 col-sm-3" style="padding-left: 0px;padding-right: 0px">HÀNH LÝ ĐI</label>

                                <div class="col-md-9 col-xs-9 col-lg-9 col-sm-9 " style="padding-right: 0px">
                                    @if (listBaggageDepart.Count() > 0)
                                    {

                                        @Html.DropDownListFor(model => Model.Passengerlist[i].BaggageDepartID, listBaggageDepart.Select(s =>
                                            new SelectListItem { Selected = s.Code == Model.Passengerlist[i].BaggageDepartID, Text = s.Name, Value = s.Code }),
                                            new { @onchange = "AddBaggage()", @class = "form-control" })
                                    }
                                </div>

                            </div>
                            if (listBaggageReturn.Count() > 0)
                            {
                                <div class="row bbot" style="    border: none;   padding-bottom: 0px;padding-top: 5px;">
                                    <label class="money col-md-3 col-xs-3 col-lg-3 col-sm-3" style="padding-left: 0px;padding-right: 0px">HÀNH LÝ VỀ</label>
                                    <div class="col-md-9 col-xs-9 col-lg-9 col-sm-9 " style="padding-right: 0px">


                                        @Html.DropDownListFor(model => Model.Passengerlist[i].BaggageReturnID, listBaggageReturn.Select(s =>
                                                    new SelectListItem { Selected = s.Code == Model.Passengerlist[i].BaggageReturnID, Text = s.Name, Value = s.Code }),
                                                    new { @onchange = "AddBaggage()", @class = "form-control" })


                                    </div>
                                </div>
                            }
                        }
                    </div>
                    break;
                }
            case 2:
                {
                    <div class="row hk  " style="border-bottom: 1px solid #f4f4f4;padding-top: 12px;padding-bottom: 0px;">
                        <span class="">HÀNH KHÁCH @(i + 1). </span>
                        <span class="">
                            @VDMMutiline.Resource.App_GlobalResources.weblanguage.Children
                        </span>
                        <input type="button" class=" but minusp1" value="" />
                    </div>
                    <div class="@string.Format("addp",i)">
                        <div class="row bbot btop" style="    border: none;   padding-bottom: 0px;padding-top: 5px;">
                            <div class="col-md-2 col-xs-3 col-lg-3 col-sm-3 " style="padding-left: 0px;padding-right: 0px">
                                <span class="money">QUÝ DANH</span>
                                <br />
                                @Html.DropDownListFor(model => Model.Passengerlist[i].Sex, Constant.Gender.dctName.Select(s =>
                                    new SelectListItem { Selected = s.Key == Model.Passengerlist[i].Sex, Text = s.Value, Value = s.Key }),
                                    new { @required = "required", @class = "form-control sexoption" })
                            </div>
                            <div class="col-md-9 col-xs-9 col-lg-9 col-sm-9 " style="padding-right: 0px">
                                <span class="money">HỌ VÀ TÊN</span><br />
                                @Html.TextBoxFor(x => x.Passengerlist[i].FullName, new {@data_parsley_FullnameValidate="", @style = "text-transform: uppercase;", @required = "required", @class = "form-control", @placeholder = VDMMutiline.Resource.App_GlobalResources.weblanguage.Full_name })
                            </div>
                        </div>


                        <div class="row bbot" style="    border: none;   padding-bottom: 0px;padding-top: 5px;">

                            <label class="money col-md-3 col-xs-3 col-lg-3 col-sm-3" style="padding-left: 0px;padding-right: 0px">Ngày sinh</label>
                            <div class="col-md-3 col-xs-3 col-lg-3 col-sm-3" style="padding-right: 0px">

                                @Html.DropDownListFor(model => Model.Passengerlist[i].Ngay, Model.Passengerlist[i].Listngay.Select(s =>
                 new SelectListItem { Selected = s.ToString() == "1", Text = s.ToString(), Value = s.ToString() }),
                                    new { @required = "required", @class = "form-control" })
                            </div>
                            <div class="col-md-3 col-xs-3 col-lg-3 col-sm-3" style="padding-right: 0px">
                                @Html.DropDownListFor(model => Model.Passengerlist[i].Thang, Model.Passengerlist[i].Listthang.Select(s =>
          new SelectListItem { Selected = s.ToString() == "1", Text = s.ToString(), Value = s.ToString() }),
                                    new { @required = "required", @class = "form-control" })
                            </div>
                            <div class="col-md-3 col-xs-3 col-lg-3 col-sm-3" style="padding-right: 0px">
                                @Html.DropDownListFor(model => Model.Passengerlist[i].Nam, Model.Passengerlist[i].Listnamtreem.Select(s =>
   new SelectListItem { Selected = s == DateTime.Now.AddYears(-3).Year, Text = s.ToString(), Value = s.ToString() }),
                                    new { @required = "required", @class = "form-control" })
                            </div>
                            @*<div class="col-md-9 col-xs-9 col-lg-9 col-sm-9 " style="padding-right: 0px">
                                    <input name='@string.Format("txtDate{0}",i)' type="text" id="@string.Format("txtDate{0}",i)" placeholder="@VDMMutiline.Resource.App_GlobalResources.weblanguage.Birthday" class="form-control">
                                </div>*@
                        </div>
                        @if (Model.BaggageInfo != null)
                        {
                            <div class="row bbot" style="    border: none;   padding-bottom: 0px;padding-top: 5px;">
                                <label class="money col-md-3 col-xs-3 col-lg-3 col-sm-3" style="padding-left: 0px;padding-right: 0px">HÀNH LÝ ĐI</label>

                                <div class="col-md-9 col-xs-9 col-lg-9 col-sm-9 " style="padding-right: 0px">
                                    @if (listBaggageDepart.Count() > 0)
                                    {

                                        @Html.DropDownListFor(model => Model.Passengerlist[i].BaggageDepartID, listBaggageDepart.Select(s =>
                                            new SelectListItem { Selected = s.Code == Model.Passengerlist[i].BaggageDepartID, Text = s.Name, Value = s.Code }),
                                            new { @onchange = "AddBaggage()", @class = "form-control" })
                                    }
                                </div>

                            </div>
                            if (listBaggageReturn.Count() > 0)
                            {
                                <div class="row bbot" style="    border: none;   padding-bottom: 0px;padding-top: 5px;">
                                    <label class="money col-md-3 col-xs-3 col-lg-3 col-sm-3" style="padding-left: 0px;padding-right: 0px">HÀNH LÝ VỀ</label>
                                    <div class="col-md-9 col-xs-9 col-lg-9 col-sm-9 " style="padding-right: 0px">


                                        @Html.DropDownListFor(model => Model.Passengerlist[i].BaggageReturnID, listBaggageReturn.Select(s =>
                                                    new SelectListItem { Selected = s.Code == Model.Passengerlist[i].BaggageReturnID, Text = s.Name, Value = s.Code }),
                                                    new { @onchange = "AddBaggage()", @class = "form-control" })


                                    </div>
                                </div>
                            }
                        }
                    </div>

                    break;
                }
            case 3:
                {
                    <div class="row hk  " style="border-bottom: 1px solid #f4f4f4;padding-top: 12px;padding-bottom: 0px;">
                        <span class="">HÀNH KHÁCH @(i + 1). </span>
                        <span class="">
                            @VDMMutiline.Resource.App_GlobalResources.weblanguage.Infants
                        </span>
                        <input type="button" class=" but minusp1" value="" />
                    </div>
                    <div class="@string.Format("addp",i)">
                        <div class="row bbot btop" style="    border: none;   padding-bottom: 0px;padding-top: 5px;">
                            <div class="col-md-2 col-xs-3 col-lg-3 col-sm-3 " style="padding-left: 0px;padding-right: 0px">
                                <span class="money">QUÝ DANH</span>
                                <br />
                                @Html.DropDownListFor(model => Model.Passengerlist[i].Sex, Constant.Gender.dctName.Select(s =>
                                    new SelectListItem { Selected = s.Key == Model.Passengerlist[i].Sex, Text = s.Value, Value = s.Key }),
                                    new { @required = "required", @class = "form-control sexoption" })
                            </div>
                            <div class="col-md-9 col-xs-9 col-lg-9 col-sm-9 " style="padding-right: 0px">
                                <span class="money">HỌ VÀ TÊN</span><br />
                                @Html.TextBoxFor(x => x.Passengerlist[i].FullName, new {@data_parsley_FullnameValidate="", @style = "text-transform: uppercase;", @required = "required", @class = "form-control", @placeholder = VDMMutiline.Resource.App_GlobalResources.weblanguage.Full_name })
                            </div>
                        </div>


                        <div class="row bbot" style="    border: none;   padding-bottom: 0px;padding-top: 5px;">

                            <label class="money col-md-3 col-xs-3 col-lg-3 col-sm-3" style="padding-left: 0px;padding-right: 0px">Ngày sinh</label>
                            <div class="col-md-3 col-xs-3 col-lg-3 col-sm-3" style="padding-right: 0px">

                                @Html.DropDownListFor(model => Model.Passengerlist[i].Ngay, Model.Passengerlist[i].Listngay.Select(s =>
                        new SelectListItem { Selected = s.ToString() == "1", Text = s.ToString(), Value = s.ToString() }),
                                    new { @required = "required", @class = "form-control" })
                            </div>
                            <div class="col-md-3 col-xs-3 col-lg-3 col-sm-3" style="padding-right: 0px">
                                @Html.DropDownListFor(model => Model.Passengerlist[i].Thang, Model.Passengerlist[i].Listthang.Select(s =>
          new SelectListItem { Selected = s.ToString() == "1", Text = s.ToString(), Value = s.ToString() }),
                                    new { @required = "required", @class = "form-control" })
                            </div>
                            <div class="col-md-3 col-xs-3 col-lg-3 col-sm-3" style="padding-right: 0px">
                                @Html.DropDownListFor(model => Model.Passengerlist[i].Nam, Model.Passengerlist[i].Listnamembe.Select(s =>
new SelectListItem { Selected = s == DateTime.Now.AddYears(-1).Year, Text = s.ToString(), Value = s.ToString() }),
                                    new { @required = "required", @class = "form-control" })
                            </div>
                            @*<div class="col-md-9 col-xs-9 col-lg-9 col-sm-9 " style="padding-right: 0px">
                                    <input name='@string.Format("txtDate{0}",i)' type="text" id="@string.Format("txtDate{0}",i)" placeholder="@VDMMutiline.Resource.App_GlobalResources.weblanguage.Birthday" class="form-control">
                                </div>*@
                        </div>
                        @if (Model.BaggageInfo != null)
                        {
                            <div class="row bbot" style="    border: none;   padding-bottom: 0px;padding-top: 5px;">
                                <label class="money col-md-3 col-xs-3 col-lg-3 col-sm-3" style="padding-left: 0px;padding-right: 0px">HÀNH LÝ ĐI</label>

                                <div class="col-md-9 col-xs-9 col-lg-9 col-sm-9 " style="padding-right: 0px">
                                    @if (listBaggageDepart.Count() > 0)
                                    {

                                        @Html.DropDownListFor(model => Model.Passengerlist[i].BaggageDepartID, listBaggageDepart.Select(s =>
                                            new SelectListItem { Selected = s.Code == Model.Passengerlist[i].BaggageDepartID, Text = s.Name, Value = s.Code }),
                                            new { @onchange = "AddBaggage()", @class = "form-control" })
                                    }
                                </div>

                            </div>
                            if (listBaggageReturn.Count() > 0)
                            {
                                <div class="row bbot">
                                    <label class="money col-md-3 col-xs-3 col-lg-3 col-sm-3" style="padding-left: 0px;padding-right: 0px">HÀNH LÝ VỀ</label>
                                    <div class="col-md-9 col-xs-9 col-lg-9 col-sm-9 " style="padding-right: 0px">


                                        @Html.DropDownListFor(model => Model.Passengerlist[i].BaggageReturnID, listBaggageReturn.Select(s =>
                                                    new SelectListItem { Selected = s.Code == Model.Passengerlist[i].BaggageReturnID, Text = s.Name, Value = s.Code }),
                                                    new { @onchange = "AddBaggage()", @class = "form-control" })


                                    </div>
                                </div>
                            }
                        }
                    </div>
                    break;

                }
        }



        <script>
            $(document).ready(function () {
                $("#@string.Format("txtDate{0}", i)").datepickerlunar({
                    numberOfMonths: 1,
                    showButtonPanel: true,
                    showAnim: "show",
                    dateFormat: "dd/mm/yy",
                    tieude: "Chọn ngày sinh",
                    onSelect: function (selectedDate) {
                    }
                });
            });
        </script>
    }
    @Html.HiddenFor(z => Model.BkBooking.Status)
    @Html.HiddenFor(z => Model.BkBooking.FromCity)
    @Html.HiddenFor(z => Model.BkBooking.ToCity)
    @Html.HiddenFor(z => Model.BkBooking.FlightDepart)
    @Html.HiddenFor(z => Model.BkBooking.FlightReturn)
    @Html.HiddenFor(z => Model.BkBooking.TotalPrice)
    <div class="bgSelect1" style="font-size: 12px; margin-top:8px;">
        <div class="row hk  " style="border-bottom: 1px solid #f4f4f4;padding-top: 12px;padding-bottom: 0px;">
            <span class="">THÔNG TIN LIÊN HỆ</span>
            <input type="button" class="but minusp2" value="" />
        </div>
        <div class="addp2">
            <div class="row bbot btop" style="    padding-bottom: 0px;">
                <label class="money col-md-3 col-xs-3 col-lg-3 col-sm-3" style="padding-left: 0px;padding-right: 0px">HỌ VÀ TÊN</label>
                <div class="col-md-9 col-xs-9 col-lg-9 col-sm-9 " style="padding-right: 0px">
                    @Html.TextBoxFor(x => Model.BkBooking.Name, new {@data_parsley_FullnameValidate="", @style = "text-transform: uppercase;", @required = "required", @class = "form-control", @placeholder = @VDMMutiline.Resource.App_GlobalResources.weblanguage.Full_name })
                </div>
            </div>

            <div class="row bbot" style="    padding-bottom: 0px;">

                <label class="money col-md-3 col-xs-3 col-lg-3 col-sm-3" style="padding-left: 0px;padding-right: 0px">ĐIỆN THOẠI</label>
                <div class="col-md-9 col-xs-9 col-lg-9 col-sm-9 " style="padding-right: 0px">
                    @Html.TextBoxFor(x => Model.BkBooking.Phone, new
                    {
                   @data_parsley_minlength = "8",
                        @data_parsley_maxlength = "10",
                   @data_parsley_minlength_message = "Nhập ít nhất 8 ký tự.",
                    @data_parsley_maxlength_message = "Nhập tối đa 10 ký tự",
                   @required = "required",
                        @class = "form-control",
                        @placeholder = @VDMMutiline.Resource.App_GlobalResources.weblanguage.Phone_number
                    })
                </div>

            </div>
            <div class="row bbot" style="    padding-bottom: 0px;">

                <label class="money col-md-3 col-xs-3 col-lg-3 col-sm-3" style="padding-left: 0px;padding-right: 0px">EMAIL</label>
                <div class="col-md-9 col-xs-9 col-lg-9 col-sm-9 " style="padding-right: 0px">
                    @Html.TextBoxFor(x => Model.BkBooking.Email, new { @type = "email", @data_parsley_type = "email", @class = "form-control", @placeholder = @VDMMutiline.Resource.App_GlobalResources.weblanguage.Email })

                </div>
            </div>
            <div class="row bbot" style="    padding-bottom: 0px;">
                <label class="money col-md-3 col-xs-3 col-lg-3 col-sm-3" style="padding-left: 0px;padding-right: 0px">ĐỊA CHỈ</label>
                <div class="col-md-9 col-xs-9 col-lg-9 col-sm-9 " style="padding-right: 0px">
                    @Html.TextBoxFor(x => Model.BkBooking.Address, new { @class = "form-control", @placeholder = @VDMMutiline.Resource.App_GlobalResources.weblanguage.Address })
                </div>
            </div>
            <div class="row bbot" style="    padding-bottom: 0px;">
                <label class="money col-md-3 col-xs-3 col-lg-3 col-sm-3" style="padding-left: 0px;padding-right: 0px">Ghi chú</label>
                <div class="col-md-9 col-xs-9 col-lg-9 col-sm-9 " style="padding-right: 0px">
                    @Html.TextAreaFor(x => Model.BkBooking.Note, new { @rows = "2", @cols = "20", @class = "form-control", @placeholder = @VDMMutiline.Resource.App_GlobalResources.weblanguage.Special_requirements })
                </div>
            </div>
        </div>
    </div>
    <h3 class="TitlewithText invoice">
        <input id="ckbShowInvoiceInfo" name="ctl00$cphMain$chkIsInvoice" type="checkbox">
        <label for="ckbShowInvoiceInfo">Tôi muốn xuất hóa đơn</label>

    </h3>
    <div id="pnInvoiceInfo" style="display:none">
        <div class="row bbot btop" style="    padding-bottom: 0px;">
            <label class="money col-md-3 col-xs-3 col-lg-3 col-sm-3" style="padding-left: 0px;padding-right: 0px">@VDMMutiline.Resource.App_GlobalResources.weblanguage.Company_name</label>
            <div class="col-md-9 col-xs-9 col-lg-9 col-sm-9 " style="padding-right: 0px">
                @Html.TextBoxFor(x => Model.BkBooking.xhdtencongty, new { @class = "form-control", @placeholder = @VDMMutiline.Resource.App_GlobalResources.weblanguage.Company_name })
            </div>
        </div>
        <div class="row bbot btop" style="    padding-bottom: 0px;">
            <label class="money col-md-3 col-xs-3 col-lg-3 col-sm-3" style="padding-left: 0px;padding-right: 0px">@VDMMutiline.Resource.App_GlobalResources.weblanguage.Address</label>
            <div class="col-md-9 col-xs-9 col-lg-9 col-sm-9 " style="padding-right: 0px">
                @Html.TextBoxFor(x => Model.BkBooking.xhddiachi, new { @class = "form-control", @placeholder = @VDMMutiline.Resource.App_GlobalResources.weblanguage.Address })
            </div>
        </div>
        <div class="row bbot btop" style="    padding-bottom: 0px;">
            <label class="money col-md-3 col-xs-3 col-lg-3 col-sm-3" style="padding-left: 0px;padding-right: 0px">@VDMMutiline.Resource.App_GlobalResources.weblanguage.City</label>
            <div class="col-md-9 col-xs-9 col-lg-9 col-sm-9 " style="padding-right: 0px">
                @Html.TextBoxFor(x => Model.BkBooking.xhdthanhpho, new { @class = "form-control", @placeholder = @VDMMutiline.Resource.App_GlobalResources.weblanguage.City })
            </div>
        </div>
        <div class="row bbot btop" style="    padding-bottom: 0px;">
            <label class="money col-md-3 col-xs-3 col-lg-3 col-sm-3" style="padding-left: 0px;padding-right: 0px">@VDMMutiline.Resource.App_GlobalResources.weblanguage.Receiver_invoice</label>
            <div class="col-md-9 col-xs-9 col-lg-9 col-sm-9 " style="padding-right: 0px">
                @Html.TextBoxFor(x => Model.BkBooking.xhdnguoinhanhd, new { @class = "form-control", @placeholder = @VDMMutiline.Resource.App_GlobalResources.weblanguage.Receiver_invoice })
            </div>
        </div>
        <div class="row bbot btop" style="    padding-bottom: 0px;">
            <label class="money col-md-3 col-xs-3 col-lg-3 col-sm-3" style="padding-left: 0px;padding-right: 0px">@VDMMutiline.Resource.App_GlobalResources.weblanguage.VAT_number</label>
            <div class="col-md-9 col-xs-9 col-lg-9 col-sm-9 " style="padding-right: 0px">
                @Html.TextBoxFor(x => Model.BkBooking.xhdvat, new { @class = "form-control", @placeholder = @VDMMutiline.Resource.App_GlobalResources.weblanguage.VAT_number })
            </div>
        </div>

        <div class="placeholder invoice">
            <span class="control-intro"></span>
            <div class="Line35 FloatLeft"></div>
        </div>
        <div class="clear"></div>

        <div class="TextTitle">
            <h3 class="TitlewithText invoice">
                <input id="ckbSendToOtherAddress" type="checkbox">
                <label for="ckbSendToOtherAddress">@VDMMutiline.Resource.App_GlobalResources.weblanguage.Other_invoice_address</label>

            </h3>
        </div>

        <div id="OtherOrderAddressInfo" style="display:none">

            <div class="row bbot btop" style="    padding-bottom: 0px;">
                <label class="money col-md-3 col-xs-3 col-lg-3 col-sm-3" style="padding-left: 0px;padding-right: 0px">@VDMMutiline.Resource.App_GlobalResources.weblanguage.Company_name</label>
                <div class="col-md-9 col-xs-9 col-lg-9 col-sm-9 " style="padding-right: 0px">
                    @Html.TextBoxFor(x => Model.BkBooking.xhdktencongty, new { @class = "form-control", @placeholder = @VDMMutiline.Resource.App_GlobalResources.weblanguage.Company_name })
                </div>
            </div>

            <div class="row bbot btop" style="    padding-bottom: 0px;">
                <label class="money col-md-3 col-xs-3 col-lg-3 col-sm-3" style="padding-left: 0px;padding-right: 0px">@VDMMutiline.Resource.App_GlobalResources.weblanguage.Address</label>
                <div class="col-md-9 col-xs-9 col-lg-9 col-sm-9 " style="padding-right: 0px">
                    @Html.TextBoxFor(x => Model.BkBooking.xhdkdiachi, new { @class = "form-control", @placeholder = @VDMMutiline.Resource.App_GlobalResources.weblanguage.Address })
                </div>
            </div>
            <div class="row bbot btop" style="    padding-bottom: 0px;">
                <label class="money col-md-3 col-xs-3 col-lg-3 col-sm-3" style="padding-left: 0px;padding-right: 0px">@VDMMutiline.Resource.App_GlobalResources.weblanguage.City</label>
                <div class="col-md-9 col-xs-9 col-lg-9 col-sm-9 " style="padding-right: 0px">
                    @Html.TextBoxFor(x => Model.BkBooking.xhdktp, new { @class = "form-control", @placeholder = @VDMMutiline.Resource.App_GlobalResources.weblanguage.City })
                </div>
            </div>
            <div class="row bbot btop" style="    padding-bottom: 0px;">
                <label class="money col-md-3 col-xs-3 col-lg-3 col-sm-3" style="padding-left: 0px;padding-right: 0px">@VDMMutiline.Resource.App_GlobalResources.weblanguage.Receiver_invoice</label>
                <div class="col-md-9 col-xs-9 col-lg-9 col-sm-9 " style="padding-right: 0px">
                    @Html.TextBoxFor(x => Model.BkBooking.xhdknguoinhanhd, new { @class = "form-control", @placeholder = @VDMMutiline.Resource.App_GlobalResources.weblanguage.Receiver_invoice })
                </div>
            </div>
            <div class="placeholder invoice">
                <span class="control-intro"></span>
                <div class="Line35 FloatLeft"></div>
            </div>
            <div class="clear"></div>
        </div>
    </div>
    <h3 class="TitlewithText invoice" style="margin-top: 0px;font-size: 1.15em;color: #fff;padding-bottom: 7px;padding-left: 15px;font-weight: bold;">
        Voucher

    </h3>
    <div class="bgSelect1" style="font-size: 12px; margin-top:0px;">

        <div class="row bbot btop" style="    padding-bottom: 0px;">
            <span class="money">MÃ GIẢM GIÁ</span>
            <br />
            <input type="hidden" id="idcode" name="idcode" />
            <div class="col-xs-9" style="padding-left: 0px; padding-right: 0px">
                <input id="txtVoucherCode" name="txtVoucherCode" class="form-control ">
            </div>
            <div class="col-xs-3" style="padding-left: 0px; padding-right: 0px">
                <a id="Button1" onclick="checkvoucher()" text="" style="color: #fff;font-size: 12px;padding: 9px 20px;border-radius: 7px;" class="radair">Áp dụng</a>
            </div>
            <div class="col-xs-12" style="padding-left: 0px; padding-right: 0px">
                <span id="err" class="italicMessages" style="color: red; display: block"></span>
            </div>
            <div id="contenvoucher" style="display: none">
                <div class="col-xs-12" style="padding-left: 0px; padding-right: 0px">
                    <div class="row bbot btop" style="padding-bottom: 0px;border-top: 0px;border-bottom: 0px;padding-top: 0px;">
                        <label class="money col-md-2 col-xs-2 col-lg-2 col-sm-2" style="padding-left: 0px;padding-right: 0px">Giá cũ:</label>
                        <div class="col-md-10 col-xs-10 col-lg-10 col-sm-10 " style="padding-right: 0px;margin-top: -4px;">
                            <span id="giacu" style="font-size: 17px;text-decoration: line-through;">giacu</span>
                        </div>
                    </div>
                    <div class="row bbot btop" style="padding-bottom: 0px;border-top: 0px;border-bottom: 0px;padding-top: 0px;">
                        <label class="money col-md-2 col-xs-2 col-lg-2 col-sm-2" style="padding-left: 0px;padding-right: 0px">KM:</label>
                        <div class="col-md-10 col-xs-10 col-lg-10 col-sm-10" style="padding-right: 0px;margin-top: -4px;">
                            <span id="KM" style="font-size: 17px;">giacu</span>
                        </div>
                    </div>
                    <div class="row bbot btop" style="padding-bottom: 0px;border-top: 0px;border-bottom: 0px;padding-top: 0px;">
                        <label class="money col-md-2 col-xs-2 col-lg-2 col-sm-2" style="padding-left: 0px;padding-right: 0px">Giá mới:</label>
                        <div class="col-md-10 col-xs-10 col-lg-10 col-sm-10" style="padding-right: 0px;margin-top: -4px;">
                            <span id="GiaMoi" style="color: red;font-size: 17px;">giacu</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-xs-12" style="padding-left: 0px; padding-right: 0px">
                <span class="italicMessages" style="display: block;">Dành cho khách hàng có mã giảm giá/giới thiệu của TVN</span>
                <span class="italicMessages" style="color: red; display: block">Lưu ý: Mỗi mã chỉ có giá trị sử dụng cho một lần đặt vé</span>
            </div>
        </div>
    </div>
    <h3 class="TitlewithText invoice" style="margin-top: 0px;font-size: 1.15em;color: #fff;padding-bottom: 7px;padding-left: 15px;font-weight: bold;">
        Tóm tắt hành trình
    </h3>
    <div class="bgSelect1" style="font-size: 12px; margin-top:0px;">
        <div class="row bbot btop" style="    padding-bottom: 0px;    font-size: 15px;">
            @{
                var Departure = Model.FareDataInfo.ListFlight.FirstOrDefault(z => z.FlightId == Model.DepartureFlightId);
            }
            @if (Departure != null)
            {
                foreach (var AvailFlt in Departure.ListSegment)
                {
                    <b>   @AvailFlt.FlightNumber @Departure.StartDate.ToString("dd/MM/") @Departure.StartDate.ToString("HH:mm") @Departure.StartPoint @Departure.EndPoint</b>
                    <br />
                }
            }
            @if (Model.ReturnFlightId > 0)
            {
                var Return = Model.FareDataInfo.ListFlight.FirstOrDefault(z => z.FlightId == Model.ReturnFlightId);

                if (Return != null)
                {
                    foreach (var AvailFlt in Return.ListSegment)
                    {
                        <b> @AvailFlt.FlightNumber @Return.StartDate.ToString("dd/MM/") @Return.StartDate.ToString("HH:mm") @Return.StartPoint @Return.EndPoint</b>
                        <br />
                    }
                }
            }
            <table>
                <tbody>
                    <tr>
                        <td>
                            <a>
                                Tổng tiền vé
                            </a>
                        </td>
                        <td style="padding-left: 20px;text-align:right;">
                            <b>@Model.FareDataInfo.TotalPrice.ToString("n0")</b>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <a>
                                Dịch vụ kèm thêm
                            </a>
                        </td>
                        <td style="padding-left: 20px;text-align:right;">
                            <b class="ItemPrice" id="lblTotalAdditionService">0</b>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <a>
                                Tổng tiền
                            </a>
                        </td>
                        <td style="padding-left: 20px;text-align:right;">
                            <b id="lblBasketGrandTotal">@Model.FareDataInfo.TotalPrice.ToString("#,0.#")</b>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

    </div>
</div>
<div id="popub" style="display: none;background: transparent !important;color: #fff;" class="bbpopub">
    <div class="imageAjaxLoading">
        <img src="~/Content/Popup/loading.gif" />
        <h4></h4>
    </div>
</div>

<script>
    //$(document).ready(function () {

    //    var myOption = "<option selected disabled>Chọn</option>";
    //    var index = 1;
    //    $(myOption).insertBefore(".sexoption option:nth-child(" + index + ")");
    //});
    $("#ckbShowInvoiceInfo").off('change').on('change', function () {
        if (this.checked) {
            $("#pnInvoiceInfo").attr("style", "display:block");
        } else {
            $("#pnInvoiceInfo").attr("style", "display:none");
        }
    });
    $("#ckbSendToOtherAddress").off('change').on('change', function () {
        if (this.checked) {
            $("#OtherOrderAddressInfo").attr("style", "display:block");
        } else {
            $("#OtherOrderAddressInfo").attr("style", "display:none");
        }
    });


    function checkvoucher() {
        $("#err").text('');
        if ($("#txtVoucherCode").val().trim() == '') {
            return;
        }
        $('#popub').bPopup({
            modalClose: false,
            opacity: 0.6,
            positionStyle: 'fixed'
        });
        $.ajax({
            type: "POST",
            contentType: "application/json; charset=utf-8",
            url: "@Url.Action("CheckVoucher", "SeachHome")",
            data: "{searchParam:'" + $("#txtVoucherCode").val() + "',trongnuoc:'1'}",
            dataType: "json",
            success: function (data) {
                if (data.TongTien != '0') {
                    $("#contenvoucher").attr("style", "display:block");
                    $("#giacu").text(data.TongTien);
                    $("#KM").text(data.km);
                    $("#GiaMoi").text(data.giamoi);
                    $('#popub').bPopup().close();

                } else {
                    $("#contenvoucher").attr("style", "display:none");
                    $("#giacu").text('');
                    $("#KM").text('');
                    $("#GiaMoi").text('');
                    $('#popub').bPopup().close();
                    $("#err").text('Không tìm thấy mã này hoặc mã này đã hết hạn.');
                }
            }
        });
    }

    ;





</script>
<script>
    function AddBaggage() {
        var totalBaggagePrice = 0;
        var grandPrice = Number($("#hdfGrandPrice").val());
        var paxNumb = Number($("#hdfNumbPax").val());
        for (var i = 1; i < paxNumb + 1; i++) {
            var valuedepart = $("#Passengerlist_" + (i - 1) + "__BaggageDepartID").val();
            var valuereturn = $("#Passengerlist_" + (i - 1) + "__BaggageReturnID").val();
            if (valuedepart != "0" || valuereturn != "0") {
                if (valuedepart != "0" && valuedepart != "" && valuedepart != null) {
                    totalBaggagePrice += Number($("#hdfBaggage_" + valuedepart+'@Model.DepartureAirportCode@Model.DestinationAirportCode').val());
                }
                if (valuereturn != "0" && valuereturn != "" && valuereturn != null) {
                    totalBaggagePrice += Number($("#hdfBaggage_" + valuereturn+'@Model.DestinationAirportCode@Model.DepartureAirportCode').val());
                }
            }
            $("#lblTotalAdditionService").text(format("#.##0,####", totalBaggagePrice));
        }

        grandPrice += totalBaggagePrice;
        $('#lblBasketGrandTotal').html(format("#.##0,####", grandPrice));
    }
</script>
